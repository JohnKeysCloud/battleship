{"version":3,"file":"index.bundle.js","mappings":"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","sources":["webpack://battleship/./src/typescript/types/logic-types.ts","webpack://battleship/./src/typescript/logic/bs-ship-builder/bs-ship-builder.ts","webpack://battleship/./src/typescript/utilities/random-utilities.ts","webpack://battleship/./src/typescript/utilities/logic-utilities.ts","webpack://battleship/./src/typescript/logic/bs-fleet-builder/bs-fleet-builder.ts","webpack://battleship/./src/typescript/logic/bs-gameboard-builder/bs-gameboard-builder.ts","webpack://battleship/./src/typescript/logic/bs-gameboard-controller/bs-gameboard-controller.ts","webpack://battleship/./src/typescript/logic/bs-gameboard-controller/abstracted-method-callbacks/get-valid-ship-positions/get-valid-ship-positions.ts","webpack://battleship/./src/typescript/logic/bs-gameboard-controller/abstracted-method-callbacks/place-ship/place-ship.ts","webpack://battleship/./src/typescript/logic/bs-gameboard-repository/bs-gameboard-repository.ts","webpack://battleship/./src/typescript/state/player-state.ts","webpack://battleship/./src/typescript/setup/randomize-bs-gameboard.ts","webpack://battleship/./src/typescript/utilities/create-github-link.ts","webpack://battleship/./src/typescript/markup/main/main-container-two/main-container-two.ts","webpack://battleship/./src/typescript/utilities/event-bus.ts","webpack://battleship/./src/typescript/components/player-gameboard-component/player-gameboard-component.ts","webpack://battleship/./src/typescript/components/opponent-gameboard-component/opponent-gameboard-component.ts","webpack://battleship/./src/typescript/utilities/create-hot-swap-container.ts","webpack://battleship/./src/typescript/markup/main/main-container-one-fragments/main-one-parabellum.ts","webpack://battleship/./src/typescript/markup/main/main-container-one-fragments/main-one-bellum.ts","webpack://battleship/./src/typescript/markup/main/main-container-one-fragments/main-one-post-bellum.ts","webpack://battleship/./src/typescript/components/ship-shuffler-component/ship-shuffler-component.ts","webpack://battleship/./src/typescript/components/ready-up-component/ready-up-component.ts","webpack://battleship/./src/typescript/markup/main/main-container-three-fragments/main-three-parabellum.ts","webpack://battleship/./src/typescript/markup/main/main-container-three-fragments/main-three-bellum.ts","webpack://battleship/./src/typescript/markup/main/main-container-three-fragments/main-three-post-bellum.ts","webpack://battleship/./src/typescript/markup/lightboxes/instructions-dialog.ts","webpack://battleship/./src/app.ts","webpack://battleship/./src/typescript/markup/header/header.ts","webpack://battleship/./src/typescript/markup/header/nav/nav.ts","webpack://battleship/./src/typescript/markup/main/main.ts"],"sourcesContent":["import { BattleshipFleetBuilder } from '../logic/bs-fleet-builder/bs-fleet-builder';\nimport { BattleshipBoardBuilder } from '../logic/bs-gameboard-builder/bs-gameboard-builder';\nimport { BattleshipBoardController } from '../logic/bs-gameboard-controller/bs-gameboard-controller';\nimport { BattleshipBoardRepository } from '../logic/bs-gameboard-repository/bs-gameboard-repository';\nimport {\n  BattleshipBuilder,\n  SHIP_SYMBOLS\n} from '../logic/bs-ship-builder/bs-ship-builder';\nimport { PlayerState } from './state-types';\n\n// ðŸ’­ --------------------------------------------------------------\n// ðŸ’­ Enumerations\n\nexport enum AnglesOfRotation {\n  Degrees0 = 0,\n  Degrees90 = 90,\n  Degrees180 = 180,\n  Degrees270 = 270\n};\nexport enum ShipType {\n  Battleship = 'battleship',\n  Carrier = 'carrier',\n  Cruiser = 'cruiser',\n  Destroyer = 'destroyer',\n  PatrolBoat = 'patrolBoat',\n  Submarine = 'submarine',\n};\n\n// ðŸ’­ --------------------------------------------------------------\n// ðŸ’­ Types\n\nexport type AngleOfRotation = null | AnglesOfRotation;\nexport type AxisArrayKey = `row-${number}` | `column-${number}`;\nexport type Coordinates = [number, number];\nexport type CoordinatesArray = Coordinates[];\nexport type OccupiedCoordinatesSet = Set<OccupiedCoordinatesSetMemberKey> | null;\nexport type OccupiedCoordinatesSetMemberKey = `[${number}, ${number}]`;\nexport type Fleet = {\n  [key in ShipType]?: BattleshipBuilder;\n};\nexport type FleetConfigs = {\n  [key in ShipType]?: ShipConfig;\n};\nexport type FleetCoordinates = {\n  [key in ShipType]?: OccupiedCoordinatesSet | null;\n};\n\nexport type InBoundRotationalPlacePieceParamsForFleet = {\n  [key in ShipType]?: RotationalPositionMap | null;\n};\nexport type Gameboard = symbol[][];\nexport type OutOfBounds = 'outOfBounds';\nexport type Orientation = 'horizontal' | 'vertical';\nexport type PositionArray = IPosition[];\nexport type RotatedCoordinatesValue = Coordinates | OutOfBounds;\nexport type RotatedPlacePieceParams = {\n  [Key in AnglesOfRotation]?: RotatedPlacePieceParamsValue;\n};\nexport type RotatedPlacePieceParamsValue = IPlacePieceParams | OutOfBounds;\nexport type RotatedPlacePieceConfigurations = IPlacePieceParams | OutOfBounds;\nexport type ShipConfig = {\n  type: ShipType;\n  version?: FleetVersion;\n};\nexport type ShipLength = 2 | 3 | 4 | 5;\nexport type ShipSymbols = {\n  [key in ShipType]: symbol; // Each key in ShipType maps to a symbol\n};\nexport type ShipSymbolDescription = 'CA' | 'BS' | 'CR' | 'SB' | 'DD' | 'PB';\nexport type ShipSymbolValueArray = ShipSymbolValue[];\nexport type ShipSymbolValue = typeof SHIP_SYMBOLS[ShipType];\nexport type SizeLookupKey = `${ShipType}-${FleetVersion}`;\nexport type RotationalPositionMap = Map<AnglesOfRotation, IPlacePieceParams>;\nexport type FleetVersion = 1990 | 2002;\n\n// ðŸ’­ --------------------------------------------------------------\n// ðŸ’­ Interfaces\n\ninterface IGridGameboard<T> {\n  readonly board: T[][];\n  fillValue: T;\n};\nexport interface IGridGameboardSquare<T> extends IGridGameboard<T> {\n  boardSize: number;\n};\nexport interface IBattlehipFleetBuilderSet {\n  playerOneFleetBuilder: BattleshipFleetBuilder;\n  playerTwoFleetBuilder: BattleshipFleetBuilder;\n}\nexport interface IBattleshipGameboardBuilderSet {\n  playerOneBoardBuilder: BattleshipBoardBuilder;\n  playerTwoBoardBuilder: BattleshipBoardBuilder;\n}\nexport interface IBattleshipFleetBuilderSet {\n  playerOneFleetBuilder: BattleshipFleetBuilder;\n  playerTwoFleetBuilder: BattleshipFleetBuilder;\n}\nexport interface IBattleshipGameboardController extends IGridGameboardController {\n  playerState: Omit<PlayerState, 'gameboardController' | 'fleetBuilder'>;\n  getValidPositions(\n    shipPlacementConfigs: IShipPlacementConfigurations\n  ): IValidPositionsResult;\n  movePiece(ship: BattleshipBuilder, newBowCoordinates: Coordinates): void;\n  placePiece(options: IPlacePieceWrapperParams): void;\n  prettyPrint(): void;\n  removePiece(ship: BattleshipBuilder, resetInitialConfigs: boolean): void;\n  removeAllPieces(fleet: Fleet): void;\n  rotatePiece(ship: BattleshipBuilder): void;\n}\nexport interface IBattleshipGameboardControllerSet {\n  playerOneBoardController: BattleshipBoardController;\n  playerTwoBoardController: BattleshipBoardController;\n}\nexport interface IBattleshipGameboardRepositorySet {\n  playerOneBoardRepository: BattleshipBoardRepository;\n  playerTwoBoardRepository: BattleshipBoardRepository;\n}\ninterface IGridGameboardController {\n  placePiece(...args: any): void;\n  removePiece(...args: any): void;\n  removeAllPieces(...args: any): void;\n}\nexport interface IPlacementConfigurations {\n  coordinatesArray: CoordinatesArray | null;\n  orientation: Orientation | null;\n};\nexport interface IRotationalPivotConfigurations extends IPlacementConfigurations {\n  transientAngleOfRotation: AngleOfRotation;\n};\nexport interface IPlacePieceParams {\n  coordinates: Coordinates;\n  orientation: Orientation;\n};\nexport interface IPlacePieceWrapperParams extends IPlacePieceParams {\n  ship: BattleshipBuilder;\n};\nexport interface IPlacePieceCallbackParams extends IPlacePieceWrapperParams {\n  battleshipBoardBuilder: BattleshipBoardBuilder\n  battleshipBoardController: BattleshipBoardController;\n  battleshipBoardRepository: BattleshipBoardRepository;\n};\nexport interface IPosition {\n  bow: Coordinates; // [rowIndex, colIndex]\n  stern: Coordinates; // [rowIndex, colIndex]\n};\nexport interface IShipOptions {\n  hitCounter: number;\n  length: ShipLength;\n  type: ShipType;\n  version: FleetVersion;\n};\nexport interface IShipPlacementConfigurations {\n  orientation: Orientation;\n  shipLength: ShipLength;\n};\nexport interface ITestCaseShipHit {\n  expected: string; // Expected output\n  hits: number; // Function returning the string to be tested\n};\nexport interface ITestCaseValidPositions {\n  shipPlacementConfigs: IShipPlacementConfigurations;\n  validPositions: IValidPositionsResult;\n};\nexport interface IValidPlacementCallbackParams extends IShipPlacementConfigurations {\n  battleshipBoardBuilder: BattleshipBoardBuilder;\n  battleshipBoardController: BattleshipBoardController;\n};\nexport interface IValidPositionsResult {\n  [key: AxisArrayKey]: PositionArray;\n};","import {\n  IPlacementConfigurations,\n  IRotationalPivotConfigurations,\n  IShipOptions,\n  ShipLength,\n  ShipSymbols,\n  ShipSymbolValue,\n  ShipType,\n  SizeLookupKey,\n  FleetVersion\n} from '../../types/logic-types';\n\nexport const SHIP_SYMBOLS: ShipSymbols = {\n  [ShipType.Carrier]: Symbol('CA'),\n  [ShipType.Battleship]: Symbol('BS'),\n  [ShipType.Cruiser]: Symbol('CR'),\n  [ShipType.Submarine]: Symbol('SB'),\n  [ShipType.Destroyer]: Symbol('DD'),\n  [ShipType.PatrolBoat]: Symbol('PB')\n} as const;\n\nconst sizeLookup: Record<SizeLookupKey, ShipLength | undefined> = {\n  'battleship-1990': 4,\n  'battleship-2002': 4,\n  'carrier-1990': 5,\n  'carrier-2002': 5,\n  'cruiser-1990': 3,\n  'cruiser-2002': undefined, // Explicitly mark missing values\n  'destroyer-1990': 2,\n  'destroyer-2002': 3,\n  'patrolBoat-1990': undefined,\n  'patrolBoat-2002': 2,\n  'submarine-1990': 3,\n  'submarine-2002': 3,\n};\n\nexport class BattleshipBuilder implements IShipOptions {\n  public readonly length: ShipLength;\n  public readonly seaworthy: boolean = true;\n  public readonly symbol: ShipSymbolValue;\n  public rotationalPivotConfigurations: IRotationalPivotConfigurations = {\n    transientAngleOfRotation: null,\n    coordinatesArray: null,\n    orientation: null\n  };\n  public currentplacementConfigurations: IPlacementConfigurations = {\n    coordinatesArray: null,\n    orientation: null\n  };\n  public isPlaced = (): boolean => this.currentplacementConfigurations.coordinatesArray !== null;\n  private _hitCounter: number = 0;\n\n  constructor(public readonly type: ShipType, public readonly version: FleetVersion = 2002) {\n    this.symbol = SHIP_SYMBOLS[type];\n\n    const key: SizeLookupKey = `${type}-${version}`;\n    const length: ShipLength | undefined = sizeLookup[key]; // Access using the typed key\n    if (length === undefined) {\n      throw new Error(`Invalid Command: ship type/version combination: ${key}.`);\n    }\n\n    this.length = length;\n  }\n\n  public hit = (): string => {\n    if (!this.isSeaworthy()) return 'This ship has already perished.';\n    \n    this._hitCounter++;\n    return `Hit registered. Hit count: ${this.hitCounter}.`; // Return the updated hit counter\n  };\n\n  isSeaworthy = (): boolean => this.hitCounter < this.length;\n\n  public resetConfigurations = (shouldResetShipRotationalData: boolean) => {\n    const placementConfigurations = { coordinatesArray: null, orientation: null };\n\n    this.currentplacementConfigurations = placementConfigurations;\n\n    if (shouldResetShipRotationalData === true) {\n      this.rotationalPivotConfigurations = {\n        ...placementConfigurations,\n        transientAngleOfRotation: null\n      };\n    }\n  };\n\n  public get hitCounter(): number {\n    return this._hitCounter;\n  }\n}","export const areArraysEqual = <T>(arrayOne: T[], arrayTwo: T[]) =>\n  arrayOne.length === arrayTwo.length\n  &&\n  arrayOne.every((value, index) => value === arrayTwo[index]);\n\nexport const getConvertedTypeFromAttr = <T extends string>(\n  element: HTMLElement,\n  attribute: string,\n  typeGuard: (value: string) => value is T\n): T => {\n  const attrValue = element.getAttribute(attribute);\n  if (!attrValue || !typeGuard(attrValue)) {\n    throw new Error(`Invalid or missing attribute: ${attribute}`);\n  }\n  return attrValue;\n};\n\nexport const getRandomInt = (min: number, max: number): number =>\n  Math.floor(Math.random() * (max - min + 1)) + min;\n\nexport const isEmptyObject = (obj: Record<PropertyKey, unknown>): boolean => {\n  return (\n    Object.keys(obj).length === 0 &&\n    Object.getOwnPropertySymbols(obj).length === 0\n  );\n};\n\nexport type Range<N extends number, Acc extends number[] = []> =\n  Acc['length'] extends N\n    ? Acc[number]\n    : Range<N, [...Acc, Acc['length']]>;\n    \n\nexport const createElement = <K extends keyof HTMLElementTagNameMap>(\n  tag: K,\n  classes: string[] = [],\n  attributes: Record<string, string> = {}\n): HTMLElementTagNameMap[K] => {\n  const element: HTMLElementTagNameMap[K] = document.createElement(tag);\n  classes.forEach((cls) => element.classList.add(cls));\n  Object.entries(attributes).forEach(([key, value]) =>\n    element.setAttribute(key, value)\n  );\n  return element;\n};\n\nexport const generateListFragment = (\n  listItemTextContentArray: { textContent: string }[],\n  identifier: string,\n  attributes: Record<string, string> = {}\n): DocumentFragment => {\n  if (!listItemTextContentArray.length)\n    throw new Error('The listItemTextContentArray is empty.');\n\n  if (!identifier) throw new Error('You must identify your list items.');\n\n  const listFragment = new DocumentFragment();\n\n  listItemTextContentArray.forEach((listItem, index) => {\n    const listElement: HTMLLIElement = createElement(\n      'li',\n      [`${identifier}-list-item`],\n      {\n        id: `${identifier}-list-item-${++index}`,\n        ...attributes,\n      }\n    );\n    listElement.textContent = listItem.textContent;\n\n    listFragment.appendChild(listElement);\n  });\n  \n  return listFragment;\n};","import {\n  AnglesOfRotation,\n  AxisArrayKey,\n  Coordinates,\n  OccupiedCoordinatesSet,\n  OccupiedCoordinatesSetMemberKey,\n  FleetCoordinates,\n  IPlacePieceParams,\n  IPosition,\n  IShipPlacementConfigurations,\n  Orientation,\n  OutOfBounds,\n  RotatedCoordinatesValue,\n  ShipLength,\n  ShipType,\n  PositionArray,\n  ShipSymbolDescription\n} from \"../types/logic-types\";\nimport { areArraysEqual } from \"./random-utilities\";\n\n// ðŸ’­ --------------------------------------------------------------\n\n// * GENERAL HELPER FUNCTIONS\nexport function createAxisArrayKey(\n  axisIndex: number,\n  isHorizontal: boolean\n): AxisArrayKey {\n  return isHorizontal ? `row-${axisIndex}` : `column-${axisIndex}`;\n}\nexport function createPositionObject(\n  [x, y]: Coordinates,\n  orientation: Orientation,\n  shipLength: ShipLength\n): IPosition {\n  const isHorizontal = orientation === 'horizontal';\n  const bowCoordinates: Coordinates = [x, y];\n  const sternCoordinates: Coordinates = isHorizontal\n    ? [x + shipLength - 1, y]\n    : [x, y + shipLength - 1];\n\n  return {\n    bow: bowCoordinates,\n    stern: sternCoordinates,\n  };\n}\nexport function createShipConfigurations(\n  shipLength: ShipLength,\n  orientation: Orientation\n): IShipPlacementConfigurations {\n  return {\n    orientation,\n    shipLength,\n  };\n}\n\n// ðŸ’­ --------------------------------------------------------------\n\n// * BOUND CHECK HELPER FUNCTIONS\nexport const isCoordinateInBounds = (coordinate: number, boardSize: number): boolean =>\n  coordinate >= 0 && coordinate < boardSize;\nexport const areCoordinatesInBounds = (coordinates: Coordinates, boardSize: number): boolean => {\n  return coordinates.every((coordinate) => isCoordinateInBounds(coordinate, boardSize)); \n}\nexport const isPositionInBounds = (position: IPosition, boardSize: number): boolean => {\n  return areCoordinatesInBounds(position.bow, boardSize) && areCoordinatesInBounds(position.stern, boardSize);\n};\n\n// ðŸ’­ --------------------------------------------------------------\n\n// * UTILITY FUNCTIONS\nexport const arePositionsEqual = (\n  positionOne: IPosition,\n  positionTwo: IPosition\n): boolean => {\n  return (\n    areArraysEqual(positionOne.bow, positionTwo.bow) &&\n    areArraysEqual(positionOne.stern, positionTwo.stern)\n  );\n};\n\n// ðŸ’­ --------------------------------------------------------------\n\n// * TYPE GUARDS\nexport function isAngleOfRotation(\n  value: unknown\n): value is AnglesOfRotation {\n  return Object.values(AnglesOfRotation).includes(value as ShipType);\n};\nexport const isCoordinates = (value: unknown): value is Coordinates => {\n  if (!Array.isArray(value) || value.length !== 2) return false;\n\n  return value.every((coordinate) => typeof coordinate === 'number');\n};\nexport const isOccupiedCoordinatesSet = (value: unknown): value is OccupiedCoordinatesSet => {\n  if (value === null) return true;\n  if (!(value instanceof Set)) return false;\n\n  for (const member of value) {\n    if (!isOccupiedCoordinatesSetMemberKey(member)) {\n      return false;\n    }\n  }\n\n  return true;\n};\nexport const isFleetCoordinates = (\n  value: unknown\n): value is FleetCoordinates => {\n  if (typeof value !== 'object' || value === null) return false;\n\n  for (const key in value) {\n    if (!Object.values(ShipType).includes(key as ShipType)) {\n      return false\n    }\n\n    const OccupiedCoordinatesSetOrNull = (value as FleetCoordinates)[\n      key as ShipType\n    ];\n\n    if (OccupiedCoordinatesSetOrNull !== null && !isOccupiedCoordinatesSet(OccupiedCoordinatesSetOrNull)) {\n      return false;\n    }\n  }\n  return true;\n};\nexport const isPlainObject = (value: unknown): value is object => {\n  if (typeof value !== 'object' || value === null) return false;\n\n  const proto = Object.getPrototypeOf(value);\n  return proto === Object.prototype || proto === null;\n  // ? Why `proto === null`: Object.create(null) is a valid plain object.\n}\nexport const isOrientation = (value: unknown): value is Orientation => {\n  if (typeof value !== 'string') return false;\n  return ['horizontal', 'vertical'].includes(value);\n}\nexport const isOutOfBounds = (value: unknown): value is OutOfBounds => {\n  return (value) === 'outOfBounds';\n};\nexport const isPlacePieceParams = (\n  value: unknown\n): value is IPlacePieceParams => {\n  if (typeof value !== 'object' || value === null) return false;\n\n  if (!isCoordinates((value as IPlacePieceParams).coordinates)) return false;\n\n  return true;\n};\nexport const isPosition = (value: unknown): value is IPosition => {\n  if (!isPlainObject(value)) return false;\n\n  const { bow, stern } = value as IPosition;\n\n  return isCoordinates(bow) && isCoordinates(stern);\n};\nexport const isPositionsArray = (value: unknown): value is PositionArray => {\n  if (!Array.isArray(value)) return false;\n\n  return value.every(position => isPosition(position));\n};\nexport const isOccupiedCoordinatesSetMemberKey = (value: unknown): value is OccupiedCoordinatesSetMemberKey => {\n  if (typeof value !== 'string') return false;\n\n  const match = value.match(/^\\[\\d{1}, \\d{1}\\]$/);\n  return match !== null;\n};\nexport const isRotatedCoordinatesValue = (\n  value: unknown\n): value is RotatedCoordinatesValue => {\n  return isCoordinates(value) || isOutOfBounds(value);\n};\nexport const isShipLength = (value: unknown): value is ShipLength => {\n  return typeof value === 'number' && [2, 3, 4, 5].includes(value);\n};\nexport const isShipSymbolDescription = (value: unknown): value is ShipSymbolDescription => {\n  return typeof value === 'string' && ['CA', 'BS', 'CR', 'SB', 'DD', 'PB'].includes(value);\n};\nexport const isShipType = (\n  value: unknown\n): value is ShipType => {\n  return Object.values(ShipType).includes(value as ShipType);\n};\n\n// ðŸ’­ --------------------------------------------------------------\n\nexport const isNotNull = <T>(value: T | null | undefined): value is T => {\n  return value !== null && value !== undefined;\n}","import {\n  Fleet,\n  FleetConfigs,\n  ShipType,\n  FleetVersion,\n} from '../../types/logic-types';\nimport {\n  BattleshipBuilder,\n} from '../bs-ship-builder/bs-ship-builder';\nimport { isShipType } from '../../utilities/logic-utilities';\n\nexport class BattleshipFleetBuilder {\n  private constructor(public readonly fleet: Fleet, public readonly version: FleetVersion) {}\n\n  private static createFleet(fleetConfigs: FleetConfigs): Fleet {\n    const fleet: Fleet = {};\n\n    for (const [shipType, config] of Object.entries(fleetConfigs)) {\n      if (config && isShipType(shipType)) {\n        fleet[shipType] = new BattleshipBuilder(config.type, config.version);\n      }\n    }\n\n    return fleet;\n  }\n\n  public static createHasbroFleet(): BattleshipFleetBuilder {\n    // 2002\n    return new BattleshipFleetBuilder(\n      BattleshipFleetBuilder.createFleet({\n        carrier: { type: ShipType.Carrier, version: 2002 },\n        battleship: { type: ShipType.Battleship, version: 2002 },\n        destroyer: { type: ShipType.Destroyer, version: 2002 },\n        submarine: { type: ShipType.Submarine, version: 2002 },\n        patrolBoat: { type: ShipType.PatrolBoat, version: 2002 },\n      }),\n      2002\n    );\n  }\n\n  public static createMBFleet(): BattleshipFleetBuilder {\n    // 1990\n    return new BattleshipFleetBuilder(\n      BattleshipFleetBuilder.createFleet({\n        carrier: { type: ShipType.Carrier, version: 1990 },\n        battleship: { type: ShipType.Battleship, version: 1990 },\n        cruiser: { type: ShipType.Cruiser, version: 1990 },\n        submarine: { type: ShipType.Submarine, version: 1990 },\n        destroyer: { type: ShipType.Destroyer, version: 1990 },\n      }),\n      1990\n    );\n  }\n\n  getShip(shipType: ShipType): BattleshipBuilder {\n    const ship = this.fleet[shipType];\n\n    if (!ship) {\n      throw new Error(\n        `Invalid Command: Ship of type ${shipType} not found in fleet.`\n      );\n    }\n\n    return ship;\n  }\n}","import {\n  Gameboard,\n  IGridGameboardSquare,\n} from '../../types/logic-types';\n\nexport class BattleshipBoardBuilder implements IGridGameboardSquare<symbol> {\n  private static readonly vacant: symbol = Symbol('VC');\n\n  private readonly _board: Gameboard;\n  private readonly _boardSize: number = 10;\n  private readonly _fillValue: symbol = BattleshipBoardBuilder.vacant;\n\n  constructor() {\n    this._board = Array.from({ length: this._boardSize }, () =>\n      Array(this._boardSize).fill(this._fillValue)\n    );\n  }\n\n  public get board(): Gameboard {\n    return this._board;\n  }\n\n  public get boardSize(): number {\n    return this._boardSize;\n  }\n\n  public get fillValue(): symbol {\n    return this._fillValue;\n  }\n}","import { BattleshipBuilder } from '../bs-ship-builder/bs-ship-builder';\nimport {\n  AngleOfRotation,\n  AnglesOfRotation,\n  AxisArrayKey,\n  Coordinates,\n  CoordinatesArray,\n  Fleet,\n  IBattleshipGameboardController,\n  IPlacePieceCallbackParams,\n  IPlacePieceParams,\n  IPlacePieceWrapperParams,\n  IPosition,\n  IShipPlacementConfigurations,\n  IValidPlacementCallbackParams,\n  IValidPositionsResult,\n  Orientation,\n  RotatedCoordinatesValue,\n  RotatedPlacePieceParams,\n  RotatedPlacePieceParamsValue,\n  ShipLength,\n  ShipType,\n  RotationalPositionMap,\n  PositionArray,\n  ShipSymbolValue,\n  ShipSymbolDescription,\n} from '../../types/logic-types';\nimport { PlayerState } from '../../types/state-types';\nimport {\n  areCoordinatesInBounds,\n  arePositionsEqual,\n  createAxisArrayKey,\n  createPositionObject,\n  isAngleOfRotation,\n  isOutOfBounds,\n  isPlacePieceParams,\n  isPositionInBounds,\n  isPositionsArray,\n  isShipSymbolDescription,\n  isShipType\n} from '../../utilities/logic-utilities';\nimport { getValidShipPositions } from './abstracted-method-callbacks/get-valid-ship-positions/get-valid-ship-positions';\nimport { placeShip } from './abstracted-method-callbacks/place-ship/place-ship';\n\nexport class BattleshipBoardController implements IBattleshipGameboardController {\n  constructor(\n    public readonly playerState: Omit<PlayerState, 'gameboardController'>\n  ) {}\n\n  // ðŸ’­ --------------------------------------------------------------\n  // ðŸ’­ Public\n\n  public getValidPositions({\n    orientation,\n    shipLength,\n  }: IShipPlacementConfigurations): IValidPositionsResult {\n    const validPlacementArg: IValidPlacementCallbackParams = {\n      orientation,\n      shipLength,\n      battleshipBoardBuilder: this.playerState.gameboardBuilder,\n      battleshipBoardController: this,\n    };\n\n    return getValidShipPositions(validPlacementArg);\n  }\n\n  public getAllValidBowCoordinates(\n    orientation: Orientation,\n    shipLength: ShipLength\n  ): Set<Coordinates> {\n    let allValidBowCoordinates: Set<Coordinates> = new Set();\n    const validPositions: IValidPositionsResult = this.getValidPositions({\n      orientation,\n      shipLength,\n    });\n\n    for (const positionsInAxis of Object.values(validPositions)) {\n      if (!isPositionsArray(positionsInAxis))\n        throw new Error(\n          `Expected each value of validPositions to be an array of IPosition objects, but received: ${typeof positionsInAxis}.`\n        );\n\n      positionsInAxis.forEach((position) =>\n        allValidBowCoordinates.add(position.bow)\n      );\n    }\n\n    return allValidBowCoordinates;\n  }\n\n  public movePiece(\n    ship: BattleshipBuilder,\n    newBowCoordinates: Coordinates\n  ): void {\n    if (!ship.isPlaced()) {\n      console.warn(`Invalid Command: The ${ship.type} has not been placed.`);\n      return;\n    }\n\n    const currentOrientation: Orientation =\n      ship.currentplacementConfigurations.orientation!;\n\n    const newPosition: IPosition = createPositionObject(\n      newBowCoordinates,\n      currentOrientation,\n      ship.length\n    );\n\n    if (\n      !isPositionInBounds(\n        newPosition,\n        this.playerState.gameboardBuilder.boardSize\n      )\n    ) {\n      console.warn(\n        `Invalid Command: Position - Bow: [${newPosition.bow}] & Stern: [${newPosition.stern}] is out of bounds for the ${ship.type}.`\n      );\n\n      return;\n    }\n\n    const validPositions: IValidPositionsResult = this.getValidPositions({\n      orientation: currentOrientation,\n      shipLength: ship.length,\n    });\n\n    const isHorizontal: boolean = currentOrientation === 'horizontal';\n    const [x, y]: Coordinates = newBowCoordinates;\n    const axisArrayKey: AxisArrayKey = createAxisArrayKey(\n      isHorizontal ? y : x,\n      isHorizontal\n    );\n\n    const axisArray: PositionArray = validPositions[axisArrayKey];\n\n    const isNewPositionValid: boolean = axisArray.some(\n      (position: IPosition): boolean => arePositionsEqual(position, newPosition)\n    );\n\n    if (isNewPositionValid) {\n      const placementParameters: IPlacePieceWrapperParams = {\n        ship,\n        coordinates: newBowCoordinates,\n        orientation: currentOrientation,\n      };\n      const shouldResetShipRotationalData: boolean = true;\n\n      this.relocateShip(\n        ship,\n        placementParameters,\n        shouldResetShipRotationalData\n      );\n    } else {\n      console.warn(\n        `Invalid Command: Position - Bow: [${newPosition.bow}] & Stern: [${newPosition.stern}] is unavailable for the ${ship.type}.`\n      );\n    }\n  }\n\n  public placePiece({\n    ship,\n    coordinates,\n    orientation,\n  }: IPlacePieceWrapperParams): void {\n    const placeShipArg: IPlacePieceCallbackParams = {\n      ship,\n      coordinates,\n      orientation,\n      battleshipBoardController: this,\n      battleshipBoardBuilder: this.playerState.gameboardBuilder,\n      battleshipBoardRepository: this.playerState.gameboardRepository,\n    };\n\n    placeShip(placeShipArg);\n\n    this.setFleetRotatedPlacePieceParams(this.playerState.fleetBuilder.fleet);\n  }\n\n  public prettyPrint(): void {\n    console.table(\n      this.playerState.gameboardBuilder.board.map((row) =>\n        row.map((symbol) =>\n          symbol.description === 'VC' ? null : symbol.description\n        )\n      )\n    );\n  }\n\n  // TODO: Finish â¤µï¸ \n  // ? add return signature\n  public receiveAttack(coordinates: Coordinates) {\n\n    // ? create set in repository for `attackedCells`\n    // ? if `attackedCells` has `coordinates`, warn that the cell has already been attacked and return gracefully\n    // ? else, add `coordinates` to `attackedCells` set\n\n    const attackedShip: BattleshipBuilder | null = this.getShipAt(coordinates);\n    \n    if (!attackedShip) {\n      // TODO: create switch to generate random miss messages? (use JSON?)\n      console.warn('Missed me with that bitch!');\n      return;\n    }\n\n    attackedShip.hit();\n\n    if (!attackedShip.isSeaworthy()) {\n      console.log(`You sunk the ${attackedShip.type} fam!`);\n    };\n\n    return attackedShip;\n  }\n\n  public removePiece(\n    ship: BattleshipBuilder,\n    shouldResetShipRotationalData: boolean = true\n  ): void {\n    if (!this.isShipValidForRemoval(ship)) return;\n\n    const removeShipFromBoard = (shipCoordinates: CoordinatesArray): void => {\n      shipCoordinates.forEach(([x, y]) => {\n        this.playerState.gameboardBuilder.board[y][x] =\n          this.playerState.gameboardBuilder.fillValue;\n      });\n    };\n    const nullifyShipCoordinateSetValue = (shipType: ShipType): void => {\n      this.playerState.gameboardRepository.nullifyShipCoordinatesValue(\n        shipType\n      );\n    };\n    const resetShipConfigurations = (\n      ship: BattleshipBuilder,\n      shouldResetShipRotationalData: boolean\n    ): void => {\n      if (shouldResetShipRotationalData) {\n        this.playerState.gameboardRepository.nullifyShipValidRotationalParams(\n          ship.type\n        );\n      }\n\n      ship.resetConfigurations(shouldResetShipRotationalData);\n    };\n\n    const shipCoordinates: CoordinatesArray =\n      ship.currentplacementConfigurations.coordinatesArray!;\n\n    removeShipFromBoard(shipCoordinates);\n    nullifyShipCoordinateSetValue(ship.type);\n    resetShipConfigurations(ship, shouldResetShipRotationalData);\n  }\n\n  public removeAllPieces(fleet: Fleet): void {\n    if (!Object.keys(fleet).length) {\n      console.error(\n        'Invalid Command: No ships to remove - Fleet is empty or uninitialized.'\n      );\n      return;\n    }\n\n    for (const ship of Object.values(fleet)) {\n      this.removePiece(ship);\n    }\n  }\n\n  public rotatePiece(ship: BattleshipBuilder): void {\n    const getNextAngle = (\n      rotationalPositionMap: RotationalPositionMap,\n      currentAngle: AngleOfRotation\n    ): AngleOfRotation => {\n      if (currentAngle === null || currentAngle === undefined)\n        throw new Error(\"Current angle doesn't exist\");\n\n      const angles: AnglesOfRotation[] = Array.from(\n        rotationalPositionMap.keys()\n      );\n\n      return (\n        angles.find((angle) => angle > currentAngle) ??\n        AnglesOfRotation.Degrees0\n      );\n    };\n    const getMaxAngle = (\n      rotationalPositionMap: RotationalPositionMap\n    ): AngleOfRotation =>\n      Array.from(rotationalPositionMap.keys()).pop() ??\n      AnglesOfRotation.Degrees0;\n    const getNextPiecePlacementParams = (\n      ship: BattleshipBuilder,\n      rotationalPositionMap: RotationalPositionMap\n    ): IPlacePieceWrapperParams => {\n      const currentAngle: AngleOfRotation =\n        ship.rotationalPivotConfigurations.transientAngleOfRotation;\n\n      const maxAngle: AngleOfRotation = getMaxAngle(rotationalPositionMap);\n\n      if (currentAngle === maxAngle) {\n        const originalBowCoordinates: Coordinates =\n          ship.rotationalPivotConfigurations.coordinatesArray![0];\n        const originalOrientation: Orientation =\n          ship.rotationalPivotConfigurations.orientation!;\n\n        // set current degree of rotation\n        ship.rotationalPivotConfigurations.transientAngleOfRotation =\n          AnglesOfRotation.Degrees0;\n\n        return {\n          ship,\n          coordinates: originalBowCoordinates,\n          orientation: originalOrientation,\n        };\n      }\n\n      const nextAngle: AngleOfRotation = getNextAngle(\n        rotationalPositionMap,\n        currentAngle\n      );\n      const nextPlacePieceParams: IPlacePieceParams | undefined =\n        rotationalPositionMap.get(nextAngle!);\n\n      // set current degree of rotation\n      ship.rotationalPivotConfigurations.transientAngleOfRotation = nextAngle;\n\n      return {\n        ship,\n        coordinates: nextPlacePieceParams!.coordinates,\n        orientation: nextPlacePieceParams!.orientation,\n      };\n    };\n    const updateTransientPlacementParams = (\n      rotationalPositionMap: RotationalPositionMap\n    ): IPlacePieceWrapperParams => {\n      let nextPlacePieceParams: IPlacePieceWrapperParams =\n        getNextPiecePlacementParams(ship, rotationalPositionMap);\n\n      while (\n        ship.rotationalPivotConfigurations.transientAngleOfRotation !==\n        initialAngle\n      ) {\n        if (\n          this.isRotatedPositionValid(\n            nextPlacePieceParams.coordinates,\n            nextPlacePieceParams.orientation,\n            ship.rotationalPivotConfigurations.transientAngleOfRotation,\n            ship.length\n          )\n        ) {\n          break;\n        }\n        nextPlacePieceParams = getNextPiecePlacementParams(\n          ship,\n          rotationalPositionMap\n        );\n      }\n\n      return nextPlacePieceParams;\n    };\n\n    const rotationalPositionMap: RotationalPositionMap =\n      this.playerState.gameboardRepository.inBoundRotationalPlacePieceForFleet[\n        ship.type\n      ]!;\n\n    const initialAngle =\n      ship.rotationalPivotConfigurations.transientAngleOfRotation;\n\n    /* \n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚ The coolest part of this whole transient concept is that it                  â”‚\n    â”‚ allows me to name a variable `finalPlacePieceParams`â€¦ which implies a         â”‚\n    â”‚ predetermined value, with a function named `updateTransientPlacementParams`â€¦ â”‚\n    â”‚ which implies something transientâ€¦ while the semantic naming of the          â”‚ \n    | key-value pair maintain sound logicality. I am intuit. - ðŸ’­                  â”‚\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n    */\n\n    const finalPlacePieceParams: IPlacePieceWrapperParams =\n      updateTransientPlacementParams(rotationalPositionMap);\n\n    if (\n      ship.rotationalPivotConfigurations.transientAngleOfRotation ===\n      initialAngle\n    ) {\n      console.warn('No valid rotational position found.');\n      return;\n    }\n\n    const shouldResetShipRotationalData: boolean = false;\n\n    this.relocateShip(\n      ship,\n      finalPlacePieceParams,\n      shouldResetShipRotationalData\n    );\n  }\n\n  // ðŸ’­ --------------------------------------------------------------\n  // ðŸ’­ Private\n\n  private areCoordinatesVacant(coordinates: Coordinates): boolean {\n    const [x, y] = coordinates;\n    return (\n      this.playerState.gameboardBuilder.board[y][x] ===\n      this.playerState.gameboardBuilder.fillValue\n    );\n  }\n\n  private getShipAt(coordinates: Coordinates): BattleshipBuilder | null {\n    if (this.areCoordinatesVacant(coordinates)) return null;\n\n    const gameboard = this.playerState.gameboardBuilder.board;\n    const [x, y]: Coordinates = coordinates;\n\n    const shipSymbolValue: ShipSymbolValue = gameboard[y][x];\n    const shipType: ShipType = this.getShipTypeFromSymbol(shipSymbolValue);\n\n    const ship: BattleshipBuilder = this.playerState.fleetBuilder.getShip(shipType);\n\n    return ship;\n  }\n\n  private getShipTypeFromSymbol = (shipSymbol: ShipSymbolValue) => {\n    if (!isShipSymbolDescription(shipSymbol.description))\n      throw new Error('Invalid ship symbol description');\n    const shipSymbolDescription: ShipSymbolDescription = shipSymbol.description; // ? Create Type\n\n    switch (shipSymbolDescription) {\n      case 'CA':\n        return ShipType.Carrier;\n      case 'DD':\n        return ShipType.Destroyer;\n      case 'SB':\n        return ShipType.Submarine;\n      case 'BS':\n        return ShipType.Battleship;\n      case 'CR':\n        return ShipType.Cruiser;\n      case 'PB':\n        return ShipType.PatrolBoat;\n      default:\n        throw new Error(\n          'The symbol description does not return valid ship type.'\n        );\n    }\n  };\n\n  private isRotatedPositionValid = (\n    [x, y]: Coordinates,\n    orientation: Orientation,\n    angleOfRotation: AngleOfRotation,\n    shipLength: ShipLength\n  ): boolean => {\n    const isHorizontal = orientation === 'horizontal';\n    const gameboardSize = this.playerState.gameboardBuilder.boardSize;\n    const gameboard = this.playerState.gameboardBuilder.board;\n    const fillValue = this.playerState.gameboardBuilder.fillValue;\n    const newAxisIndexStart = isHorizontal ? x : y;\n\n    let i: number;\n    let axisIndexEnd: number;\n\n    if (\n      (!isHorizontal && angleOfRotation === AnglesOfRotation.Degrees90) ||\n      (isHorizontal && angleOfRotation === AnglesOfRotation.Degrees270) ||\n      angleOfRotation === AnglesOfRotation.Degrees0\n    ) {\n      i = 1;\n      axisIndexEnd = shipLength;\n    } else {\n      i = 0;\n      axisIndexEnd = shipLength - 1;\n    }\n\n    if (newAxisIndexStart + shipLength - 1 >= gameboardSize) return false;\n\n    for (i; i < axisIndexEnd; i++) {\n      const cellValue = isHorizontal\n        ? gameboard[y][x + i]\n        : gameboard[y + i][x];\n\n      if (cellValue !== fillValue) return false;\n    }\n\n    return true;\n  };\n\n  private getRotatedPlacePieceParams(ship: BattleshipBuilder) {\n    const applyOffsetToCoordinate = (\n      coordinate: number,\n      shipLength: ShipLength\n    ): number => {\n      const offset: number = shipLength - 1;\n      return coordinate - offset;\n    };\n    const determineRotatedOrientation = (\n      angleOfRotation: AngleOfRotation,\n      isHorizontal: boolean\n    ): Orientation => {\n      return isHorizontal\n        ? angleOfRotation === AnglesOfRotation.Degrees180\n          ? 'horizontal'\n          : 'vertical'\n        : angleOfRotation === AnglesOfRotation.Degrees180\n        ? 'vertical'\n        : 'horizontal';\n    };\n    const getRotatedBowCoordinates = (\n      angleOfRotation: AngleOfRotation,\n      isHorizontal: boolean,\n      [x, y]: Coordinates\n    ): RotatedCoordinatesValue => {\n      if (\n        angleOfRotation === AnglesOfRotation.Degrees0 ||\n        (angleOfRotation === AnglesOfRotation.Degrees90 && isHorizontal) ||\n        (angleOfRotation === AnglesOfRotation.Degrees270 && !isHorizontal)\n      ) {\n        return rotationalPivotBowCoordinates;\n      }\n\n      const rotatedBowCoordinates: Coordinates = isHorizontal\n        ? angleOfRotation === AnglesOfRotation.Degrees180\n          ? [applyOffsetToCoordinate(x, ship.length), y]\n          : [x, applyOffsetToCoordinate(y, ship.length)] // angleOfRotation === 270\n        : angleOfRotation === AnglesOfRotation.Degrees180\n        ? [x, applyOffsetToCoordinate(y, ship.length)]\n        : [applyOffsetToCoordinate(x, ship.length), y]; // angleOfRotation === 90\n\n      return areCoordinatesInBounds(\n        rotatedBowCoordinates,\n        this.playerState.gameboardBuilder.boardSize\n      )\n        ? rotatedBowCoordinates\n        : 'outOfBounds';\n    };\n    const createRotatedPiecePlacementParams = (\n      rotationalPivotBowCoordinates: Coordinates,\n      rotationalPivotOrientation: Orientation\n    ): RotatedPlacePieceParams => {\n      const isHorizontal = rotationalPivotOrientation === 'horizontal';\n\n      const rotatedPiecePlacementParams: RotatedPlacePieceParams = {};\n\n      const anglesOfRotation: AnglesOfRotation[] = [\n        AnglesOfRotation.Degrees0,\n        AnglesOfRotation.Degrees90,\n        AnglesOfRotation.Degrees180,\n        AnglesOfRotation.Degrees270,\n      ];\n\n      anglesOfRotation.forEach((angleOfRotation) => {\n        const coordinates: RotatedCoordinatesValue =\n          angleOfRotation === AnglesOfRotation.Degrees0\n            ? rotationalPivotBowCoordinates\n            : getRotatedBowCoordinates(\n                angleOfRotation,\n                isHorizontal,\n                rotationalPivotBowCoordinates\n              );\n\n        if (coordinates === 'outOfBounds') {\n          rotatedPiecePlacementParams[angleOfRotation] = 'outOfBounds';\n        } else {\n          rotatedPiecePlacementParams[angleOfRotation] = {\n            coordinates,\n            orientation:\n              angleOfRotation === AnglesOfRotation.Degrees0\n                ? rotationalPivotOrientation\n                : determineRotatedOrientation(angleOfRotation, isHorizontal),\n          };\n        }\n      });\n\n      return rotatedPiecePlacementParams;\n    };\n    const generateRotationalPositionMap = (\n      rotatedPiecePlacementParams: RotatedPlacePieceParams\n    ): RotationalPositionMap => {\n      const rotatedPlacePieceParams: RotationalPositionMap = new Map();\n\n      for (const angleOfRotationString of Object.keys(\n        rotatedPiecePlacementParams\n      )) {\n        const angleOfRotationToNum = +angleOfRotationString as AngleOfRotation;\n\n        if (!isAngleOfRotation(angleOfRotationToNum)) {\n          throw new Error(\n            `Invalid Type: \"${angleOfRotationString}\" doesn't conform to \"AngleOfRotation\".`\n          );\n        }\n\n        const rotatedPlacePieceParamsValue: RotatedPlacePieceParamsValue =\n          rotatedPiecePlacementParams[angleOfRotationToNum]!;\n\n        if (\n          !(\n            isPlacePieceParams(rotatedPlacePieceParamsValue) ||\n            isOutOfBounds(rotatedPlacePieceParamsValue)\n          )\n        ) {\n          throw new Error(\n            `Invalid Type: \"${rotatedPlacePieceParamsValue}\" doesn't conform to \"RotatedPlacePieceParams\".`\n          );\n        }\n\n        if (!isPlacePieceParams(rotatedPlacePieceParamsValue)) continue;\n\n        const { coordinates: bowCoordinates, orientation }: IPlacePieceParams =\n          rotatedPlacePieceParamsValue;\n\n        const placePieceParams: IPlacePieceParams = {\n          coordinates: bowCoordinates,\n          orientation,\n        };\n\n        rotatedPlacePieceParams.set(angleOfRotationToNum, placePieceParams);\n      }\n\n      return rotatedPlacePieceParams;\n    };\n\n    const rotationalPivotBowCoordinates: Coordinates =\n      ship.rotationalPivotConfigurations.coordinatesArray![0];\n    const rotationalPivotOrientation: Orientation =\n      ship.rotationalPivotConfigurations.orientation!;\n    const rotatedPiecePlacementParams: RotatedPlacePieceParams =\n      createRotatedPiecePlacementParams(\n        rotationalPivotBowCoordinates,\n        rotationalPivotOrientation\n      );\n\n    const rotatedPlacePieceParamsMap: RotationalPositionMap =\n      generateRotationalPositionMap(rotatedPiecePlacementParams);\n\n    return rotatedPlacePieceParamsMap;\n  }\n\n  private isShipValidForRemoval(ship: BattleshipBuilder): boolean {\n    if (\n      !ship.currentplacementConfigurations.coordinatesArray ||\n      !this.playerState.gameboardRepository.isShipPlaced(ship.type)\n    ) {\n      console.error(\n        `Error removing ship: ${ship.type} is missing coordinates or not in the fleet.`\n      );\n      return false;\n    }\n\n    return true;\n  }\n\n  private relocateShip(\n    ship: BattleshipBuilder,\n    placementParameters: IPlacePieceWrapperParams,\n    shouldResetShipRotationalData: boolean\n  ): void {\n    this.removePiece(ship, shouldResetShipRotationalData);\n    this.placePiece(placementParameters);\n  }\n\n  private setFleetRotatedPlacePieceParams(fleet: Fleet): void {\n    for (const ship of Object.values(fleet)) {\n      if (ship.isPlaced()) this.setShipRotatedPlacePieceParams(ship);\n    }\n  }\n\n  private setShipRotatedPlacePieceParams(ship: BattleshipBuilder): void {\n    const rotatedPlacePieceParams: RotationalPositionMap =\n      this.getRotatedPlacePieceParams(ship);\n\n    this.playerState.gameboardRepository.setShipValidRotationalParams(\n      ship,\n      rotatedPlacePieceParams\n    );\n  }\n}\n","import {\n  AxisArrayKey,\n  Coordinates,\n  Gameboard,\n  IValidPlacementCallbackParams,\n  IValidPositionsResult,\n  Orientation,\n  PositionArray,\n  ShipLength,\n} from '../../../../types/logic-types';\n\nexport function getValidShipPositions({\n  shipLength,\n  orientation,\n  battleshipBoardBuilder\n}: IValidPlacementCallbackParams): IValidPositionsResult {\n  const extractAxisArray = (\n    axisIndex: number,\n    orientation: Orientation,\n    gameboard: Gameboard\n  ): Array<symbol> => { // or symbol[]\n    \n    return orientation === 'horizontal'\n      ? gameboard[axisIndex] // Returns row #<axisIndex>\n      : gameboard.map(row => row[axisIndex]) // `y` values at column-<axisIndex>\n  };\n  const findValidPositionsInAxis = (\n    axisArray: Array<symbol>, // or symbol[]\n    isHorizontal: boolean,\n    axisIndex: number,\n    shipLength: ShipLength\n  ): PositionArray => {\n    let streak: number = 0;\n    let validAxisPositions: PositionArray = [];\n    \n    for (let i = 0; i < axisArray.length; i++) {\n      if (axisArray[i] === battleshipBoardBuilder.fillValue) {\n        streak++;\n        \n        if (streak >= shipLength) {\n          const bowPosition: Coordinates =\n            isHorizontal\n            ? [i - (shipLength - 1), axisIndex]\n            : [axisIndex, i - (shipLength - 1)];\n          \n          const sternPosition: Coordinates =\n            isHorizontal\n              ? [i, axisIndex]\n              : [axisIndex, i];\n\n          validAxisPositions.push({\n            bow: bowPosition,\n            stern: sternPosition,\n          });\n        }\n      } else {\n        streak = 0;\n      }\n    }\n    \n    return validAxisPositions;\n  };\n\n  const validPositionsPerAxis: IValidPositionsResult = {}; \n  const board: Gameboard = battleshipBoardBuilder.board;\n  const isHorizontal = orientation === 'horizontal';\n\n  for (let axisIndex = 0; axisIndex < board.length; axisIndex++) {\n    const axisArray: Array<symbol> = extractAxisArray(axisIndex, orientation, board);\n    const validPositions: PositionArray = findValidPositionsInAxis(\n      axisArray,\n      isHorizontal,\n      axisIndex,\n      shipLength\n    );\n    \n    const axisTemplate: AxisArrayKey =\n      isHorizontal\n        ? `row-${axisIndex}`\n        : `column-${axisIndex}`;\n    \n    validPositionsPerAxis[axisTemplate] = validPositions;\n  }\n\n  return validPositionsPerAxis;\n}","import {\n  AnglesOfRotation,\n  AxisArrayKey,\n  Coordinates,\n  CoordinatesArray,\n  Gameboard,\n  IPlacementConfigurations,\n  IPlacePieceCallbackParams,\n  IPosition,\n  IShipPlacementConfigurations,\n  IValidPositionsResult,\n  Orientation,\n  ShipLength,\n  ShipSymbolValue,\n  ShipType,\n} from '../../../../types/logic-types';\nimport { arePositionsEqual, createPositionObject, isCoordinateInBounds } from '../../../../utilities/logic-utilities';\nimport { BattleshipBuilder } from '../../../bs-ship-builder/bs-ship-builder';\n\nexport function placeShip({\n  ship,\n  coordinates,\n  orientation,\n  battleshipBoardController,\n  battleshipBoardBuilder,\n  battleshipBoardRepository\n}: IPlacePieceCallbackParams): void {  \n  const shipLength: ShipLength = ship.length;\n  const [bowX, bowY]: Coordinates = coordinates;\n  const isHorizontal: boolean = orientation === 'horizontal';\n  const axisStart: number = isHorizontal ? bowX : bowY;\n  const axisEnd = axisStart + shipLength - 1;\n\n  if (!isCoordinateInBounds(axisEnd, battleshipBoardBuilder.boardSize)) {\n    const errorMessage: string = `Invalid Command: The ship placement attempt with the following configurations is out of bounds - Coordinates: ${coordinates}, Length: ${ship.length}, Orientation: ${orientation}.`;\n    throw new Error(errorMessage);\n  };\n\n  if (ship.isPlaced()) {\n    console.warn(`Invalid Command: The ${ship.type} has already been placed.`);\n    return;\n  };\n\n  const isPositionValid = (\n    position: IPosition,\n    shipConfigurations: IShipPlacementConfigurations,\n    axisArrayKey: AxisArrayKey\n  ): boolean => {\n    const validPositions: IValidPositionsResult =\n      battleshipBoardController.getValidPositions(shipConfigurations);\n\n    return validPositions[axisArrayKey].some((validPosition: IPosition) =>\n      arePositionsEqual(position, validPosition)\n    );\n  };\n\n  const position: IPosition = createPositionObject(\n    coordinates,\n    orientation,\n    shipLength,\n  );\n\n  const shipConfigurations: IShipPlacementConfigurations = {\n    shipLength,\n    orientation\n  };\n  const axisArrayKey: AxisArrayKey = isHorizontal\n    ? `row-${bowY}`\n    : `column-${bowX}`; \n    \n  if (isPositionValid(position, shipConfigurations, axisArrayKey)) {\n    const getPlacementCoordinates = (\n      validPosition: IPosition,\n      isHorizontal: Boolean\n    ): CoordinatesArray => {\n      const placementCoordinates: CoordinatesArray = [];\n\n      const [bowX, bowY]: Coordinates = validPosition.bow;\n      const [sternX, sternY]: Coordinates = validPosition.stern;\n\n      const primary: number = isHorizontal\n        ? bowY\n        : bowX;\n      const axisStart: number = isHorizontal\n        ? bowX\n        : bowY;\n      const axisEnd: number = isHorizontal\n        ? sternX\n        : sternY;\n\n      for (let i = axisStart; i <= axisEnd; i++) {\n        placementCoordinates.push(isHorizontal ? [i, primary] : [primary, i]);\n      }\n\n      return placementCoordinates;\n    };\n    const placeOnBoard = (\n      ship: BattleshipBuilder,\n      shipPlacementCoordinates: CoordinatesArray\n    ): void => {\n      const gameboard: Gameboard = battleshipBoardBuilder.board;\n      const shipSymbol: ShipSymbolValue = ship.symbol;\n\n      shipPlacementCoordinates.forEach((coordinates) => {\n        const [x, y]: Coordinates = coordinates;\n        gameboard[y][x] = shipSymbol;\n      });\n    };\n    const setShipConfigurations = (\n      ship: BattleshipBuilder,\n      coordinatesArray: CoordinatesArray,\n      orientation: Orientation\n    ): void => {\n      const placementConfigurations: IPlacementConfigurations = { coordinatesArray, orientation };\n      \n      ship.currentplacementConfigurations = placementConfigurations;\n\n      if (Object.values(ship.rotationalPivotConfigurations).every(value => value === null)) {\n        ship.rotationalPivotConfigurations = {\n          ...placementConfigurations,\n          transientAngleOfRotation: AnglesOfRotation.Degrees0,\n        }\n      }      \n    };\n    const updateOccupiedCoordinatesSet = (\n      shipType: ShipType,\n      placementCoordinates: CoordinatesArray\n    ): void => {\n      battleshipBoardRepository.addShipToFleetCoordinates(\n        shipType,\n        placementCoordinates\n      );\n    };\n\n    const placementCoordinates: CoordinatesArray = getPlacementCoordinates(\n      position,\n      isHorizontal\n    );\n\n    placeOnBoard(ship, placementCoordinates);\n    setShipConfigurations(\n      ship,\n      placementCoordinates,\n      orientation\n    );\n    updateOccupiedCoordinatesSet(ship.type, placementCoordinates);\n  } else {\n    const errorMessage: string = `Invalid Command: \"${JSON.stringify(\n      position\n    )}\" is unavailable for ship with Size: ${shipLength} and Orientation: ${orientation}.`;\n\n    throw new Error(errorMessage);\n  }\n}\n","import { BattleshipBuilder } from \"../bs-ship-builder/bs-ship-builder\";\nimport {\n  Coordinates,\n  CoordinatesArray,\n  OccupiedCoordinatesSetMemberKey,\n  FleetCoordinates,\n  InBoundRotationalPlacePieceParamsForFleet,\n  ShipType,\n  RotationalPositionMap\n} from \"../../types/logic-types\";\n\nexport class BattleshipBoardRepository {\n  private readonly _fleetCoordinates: FleetCoordinates = {};\n  private readonly _inBoundRotationalPlacePieceParamsForFleet: InBoundRotationalPlacePieceParamsForFleet = {};\n\n  // ðŸ’­ --------------------------------------------------------------\n\n  public get fleetCoordinates(): FleetCoordinates {\n    return this._fleetCoordinates;\n  }\n\n  public get inBoundRotationalPlacePieceForFleet(): InBoundRotationalPlacePieceParamsForFleet {\n    return this._inBoundRotationalPlacePieceParamsForFleet;\n  }\n\n  public addShipToFleetCoordinates(\n    shipType: ShipType,\n    placementCoordinates: CoordinatesArray\n  ): void {\n    if (!this.fleetCoordinates[shipType]) {\n      this.fleetCoordinates[shipType] = new Set();\n    }\n\n    placementCoordinates.forEach((coordinates: Coordinates) => {\n      const [x, y]: Coordinates = coordinates;\n      const setMemberTemplate: OccupiedCoordinatesSetMemberKey = `[${x}, ${y}]`;\n      this.fleetCoordinates[shipType]!.add(setMemberTemplate);\n    });\n  }\n\n  public isShipPlaced(shipType: ShipType): boolean {\n    return this.fleetCoordinates[shipType] !== null;\n  }\n\n  public nullifyShipCoordinatesValue(shipType: ShipType): void {\n    this.fleetCoordinates[shipType] = null;\n  }\n\n  public nullifyShipValidRotationalParams(shipType: ShipType): void {\n    this.inBoundRotationalPlacePieceForFleet[shipType] = null;\n  }\n  \n  public setShipValidRotationalParams(\n    ship: BattleshipBuilder,\n    validRotatedPlacePieceParams: RotationalPositionMap\n  ): void {\n    if (!this._inBoundRotationalPlacePieceParamsForFleet[ship.type])\n      this._inBoundRotationalPlacePieceParamsForFleet[ship.type] =\n        validRotatedPlacePieceParams;\n  }\n}","import { BattleshipFleetBuilder } from \"../logic/bs-fleet-builder/bs-fleet-builder\";\nimport { BattleshipBoardBuilder } from \"../logic/bs-gameboard-builder/bs-gameboard-builder\";\nimport { BattleshipBoardController } from \"../logic/bs-gameboard-controller/bs-gameboard-controller\";\nimport { BattleshipBoardRepository } from \"../logic/bs-gameboard-repository/bs-gameboard-repository\";\nimport { FleetVersion } from \"../types/logic-types\";\nimport { PlayerState } from \"../types/state-types\";\n\nexport const createPlayerStateObject = (fleetVersion: FleetVersion = 2002) => { \n  const gameboardBuilder = new BattleshipBoardBuilder();\n  const gameboardRepository = new BattleshipBoardRepository();\n  const fleetBuilder = fleetVersion === 2002\n    ? BattleshipFleetBuilder.createHasbroFleet()\n    : BattleshipFleetBuilder.createMBFleet();\n  const gameboardController = new BattleshipBoardController({\n    gameboardBuilder,\n    gameboardRepository,\n    fleetBuilder\n  });\n\n  return {\n    gameboardBuilder,\n    gameboardRepository,\n    fleetBuilder,\n    gameboardController,\n  }\n}\n\nconst player: PlayerState = createPlayerStateObject();\nconst opponent: PlayerState = createPlayerStateObject();\n\nexport const players: { player: PlayerState; opponent: PlayerState } = {\n  player,\n  opponent,\n};","import {\n  Coordinates,\n  Fleet,\n  IPlacePieceWrapperParams,\n  IShipPlacementConfigurations,\n  Orientation,\n  IPosition,\n  PositionArray,\n  AxisArrayKey,\n} from '../types/logic-types';\nimport {\n  areArraysEqual,\n  getRandomInt,\n} from '../utilities/random-utilities';\nimport { BattleshipBuilder } from '../logic/bs-ship-builder/bs-ship-builder';\nimport { BattleshipBoardController } from '../logic/bs-gameboard-controller/bs-gameboard-controller';\nimport { isShipType } from '../utilities/logic-utilities';\n\nexport function randomizeBSGameboard(\n  gameboardController: BattleshipBoardController, fleet: Fleet\n) {\n  if (!gameboardController)\n    throw new Error('Invalid Command: `gameboardController` is required to randomize the gameboard.');\n  if (!fleet)\n    throw new Error('Invalid Command: `fleet` is required to randomize the gameboard.');\n\n  const generateRandomCoordinates = (\n    shipLength: number,\n    boardSize: number\n  ): Coordinates => {\n    const max: number = boardSize - shipLength;\n    const xRandom: number = getRandomInt(0, max);\n    const yRandom: number = getRandomInt(0, max);\n\n    return [xRandom, yRandom];\n  };\n  const generateRandomOrientation = (): Orientation => {\n    return Math.random() < 0.5 ? 'horizontal' : 'vertical';\n  };\n  const areCoordinatesValid = (\n    coordinates: Coordinates,\n    ship: BattleshipBuilder,\n    orientation: Orientation\n  ): boolean => {\n    const validPositionsParams: IShipPlacementConfigurations = {\n      shipLength: ship.length,\n      orientation,\n    };\n\n    const validPositions =\n      gameboardController.getValidPositions(validPositionsParams);\n    const [bowX, bowY]: Coordinates = coordinates;\n    const isHorizontal: boolean = orientation === 'horizontal';\n    const axisIndex: number = isHorizontal ? bowY : bowX;\n\n    const axisArrayKey: AxisArrayKey = isHorizontal\n      ? `row-${axisIndex}`\n      : `column-${axisIndex}`;\n    const axisArray: PositionArray = validPositions[axisArrayKey];\n\n    return axisArray.some((position: IPosition) =>\n      areArraysEqual(position.bow, coordinates)\n    );\n  }; \n  const getValidCoordinatesRecursively = (\n    ship: BattleshipBuilder,\n    orientation: Orientation,\n    boardSize: number,\n    attempts: number = 0\n  ): Coordinates => {\n    if (attempts > 100)\n      throw new Error(`Max recursion depth exceeded when placing the ${ship.type}.`);\n\n    const coordinates: Coordinates = generateRandomCoordinates(\n      ship.length,\n      boardSize\n    );\n\n    return areCoordinatesValid(coordinates, ship, orientation)\n      ? coordinates\n      : getValidCoordinatesRecursively(\n          ship,\n          orientation,\n          boardSize,\n          attempts + 1\n        )\n  };\n\n  const boardSize: number = 10;\n\n  for (const shipType in fleet) {\n    if (!isShipType(shipType)) throw new Error(`Invalid Type: \"${shipType}\" doesn't conform to \"ShipType\".`);\n\n    const ship: BattleshipBuilder = fleet[shipType]!;\n    const randomOrientation: Orientation = generateRandomOrientation();\n\n    const coordinates: Coordinates = getValidCoordinatesRecursively(\n      ship,\n      randomOrientation,\n      boardSize\n    );\n\n    const placePieceParams: IPlacePieceWrapperParams = {\n      ship,\n      coordinates,\n      orientation: randomOrientation,\n    };\n    \n    gameboardController.placePiece(placePieceParams);\n  }\n}\n","// * UTILITIY\nfunction setAttributes(\n  element: Element,\n  attributes: { [key: string]: string }\n) {\n  for (const key in attributes) {\n    element.setAttribute(key, attributes[key]);\n  }\n}\n\n// > ------------------------------------------------------------------------\n\nexport function createGitHubLink(\n  size: string = '50px',\n  color: string = '#FFF',\n  gitHubUsername: string = 'johnKeysCloud',\n  projectName?: string\n): HTMLAnchorElement {\n  const pathOne: SVGPathElement = document.createElementNS(\n    'http://www.w3.org/2000/svg',\n    'path'\n  );\n  pathOne.setAttribute(\n    'd',\n    'M8.20003216,0 C3.67186256,0 0,3.67233045 0,8.2025137 C0,11.8266603 2.34955472,14.9012922 5.60770169,15.9859115 C6.01749428,16.0618219 6.16798309,15.8079721 6.16798309,15.5913056 C6.16798309,15.3957396 6.16033003,14.7495356 6.15685721,14.064154 C3.87553694,14.5603383 3.3941657,13.0963596 3.3941657,13.0963596 C3.02115925,12.1482506 2.48370842,11.896202 2.48370842,11.896202 C1.7397535,11.3870871 2.53978801,11.3975087 2.53978801,11.3975087 C3.36323189,11.4554066 3.79681972,12.242817 3.79681972,12.242817 C4.52816959,13.4968196 5.71510182,13.1342505 6.18303197,12.9247247 C6.25660428,12.3945093 6.46915364,12.0327122 6.70363321,11.8278826 C4.88233278,11.6204154 2.96765212,10.9170854 2.96765212,7.77413412 C2.96765212,6.87864774 3.28798748,6.14688355 3.81257603,5.57247278 C3.72742766,5.36584187 3.44677247,4.53159853 3.89200067,3.40175461 C3.89200067,3.40175461 4.58058343,3.18129256 6.14759636,4.24255971 C6.80164386,4.06076054 7.50315322,3.96966796 8.20003216,3.96658007 C8.89691109,3.96966796 9.59893494,4.06076054 10.2542687,4.24255971 C11.8194166,3.18129256 12.5070347,3.40175461 12.5070347,3.40175461 C12.9533562,4.53159853 12.6725723,5.36584187 12.587424,5.57247278 C13.1131701,6.14688355 13.4313189,6.87858341 13.4313189,7.77413412 C13.4313189,10.9245478 11.5130368,11.6182925 9.68710595,11.8213208 C9.98120223,12.0758783 10.2432714,12.5750862 10.2432714,13.3403025 C10.2432714,14.4377879 10.2337533,15.3211158 10.2337533,15.5913056 C10.2337533,15.8095804 10.3813481,16.0653602 10.7970574,15.9848178 C14.0534036,14.8989763 16.4,11.825438 16.4,8.2025137 C16.4,3.67233045 12.7286519,0 8.20003216,0'\n  );\n\n  const pathTwo: SVGPathElement = document.createElementNS(\n    'http://www.w3.org/2000/svg',\n    'path'\n  );\n  setAttributes(pathTwo, {\n    'd': 'M3.07518929,11.6824029 C3.05731167,11.723257 2.99359073,11.7355197 2.93568001,11.7075092 C2.87662002,11.6806603 2.84341872,11.6248974 2.86257332,11.5838496 C2.88013169,11.5417693 2.94385264,11.5300229 3.00278493,11.5582916 C3.06197262,11.5850759 3.09568471,11.6413552 3.07518929,11.6824029 M3.47564797,12.0435714 C3.436828,12.0799722 3.36091196,12.0630626 3.30938611,12.0055571 C3.25613634,11.9481806 3.24617596,11.8715065 3.28557057,11.8345248 C3.32560367,11.7981885 3.39922115,11.8151627 3.45259861,11.8726037 C3.50584838,11.9306256 3.51619186,12.0068479 3.47558413,12.0436359 M3.75038868,12.5056811 C3.70045904,12.5407266 3.61886048,12.5078755 3.5684839,12.4346866 C3.51861811,12.3615623 3.51861811,12.2737872 3.56956933,12.2386127 C3.62013745,12.2034381 3.70045904,12.235063 3.75153796,12.307671 C3.8013399,12.3820861 3.8013399,12.4698612 3.75032483,12.5057457 M4.2149514,13.0409152 C4.1703212,13.0906114 4.07531442,13.0773161 4.0057194,13.0094195 C3.93459201,12.9430719 3.91473508,12.8489074 3.95949298,12.7991467 C4.00463397,12.7493214 4.10021539,12.7633267 4.1703212,12.8306424 C4.24100164,12.8968609 4.26258248,12.9917354 4.21501525,13.0409152 M4.81538402,13.2216286 C4.79578249,13.2860399 4.70422354,13.3153413 4.6120261,13.2879762 C4.51995636,13.259772 4.45968324,13.1842596 4.4782632,13.1191383 C4.49741779,13.0542751 4.58935983,13.0237475 4.68225961,13.0530489 C4.77420165,13.081124 4.83460247,13.1560554 4.81544787,13.2216286 M5.49881989,13.2982381 C5.50111844,13.3661347 5.42290385,13.422414 5.32610931,13.4236402 C5.22874013,13.4257701 5.15001476,13.3708461 5.14899318,13.3041113 C5.14899318,13.2355693 5.22542,13.1798063 5.32272533,13.1781928 C5.41951987,13.1762566 5.49881989,13.2307933 5.49881989,13.2982381 M6.17012451,13.2722283 C6.18174496,13.3384468 6.11444849,13.4064725 6.01835628,13.4245438 C5.92386029,13.4419697 5.83638766,13.4011156 5.82432026,13.3354779 C5.81257211,13.2675814 5.88114555,13.1996203 5.97545,13.1820007 C6.07173375,13.1650911 6.15786557,13.2049126 6.17012451,13.2722283',\n    'fill-rule': 'nonzero',\n  });\n\n  const gInner: SVGElement = document.createElementNS(\n    'http://www.w3.org/2000/svg',\n    'g'\n  );\n  gInner.setAttribute('fill', color);\n  gInner.append(pathOne, pathTwo);\n\n  const gOuter: SVGElement = document.createElementNS(\n    'http://www.w3.org/2000/svg',\n    'g'\n  );\n  setAttributes(gOuter, {\n    stroke: 'none',\n    'stroke-width': '1',\n    fill: 'none',\n    'fill-rule': 'evenodd',\n  });\n  gOuter.appendChild(gInner);\n\n  const gitHubSVG: SVGElement = document.createElementNS(\n    'http://www.w3.org/2000/svg',\n    'svg'\n  );\n  setAttributes(gitHubSVG, {\n    viewBox: '0 0 17 16',\n    version: '1.1',\n    xmlns: 'http://www.w3.org/2000/svg',\n    'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n    width: size,\n    height: size,\n  });\n  gitHubSVG.classList.add('git-hub-svg');\n  gitHubSVG.appendChild(gOuter);\n\n  const gitHubLogoLink: HTMLAnchorElement = document.createElement('a');\n  gitHubLogoLink.classList.add('git-hub-logo-link');\n  setAttributes(gitHubLogoLink, {\n    href: projectName\n      ? `https://github.com/${gitHubUsername}/${projectName}`\n      : `https://github.com/${gitHubUsername}`,\n    rel: 'noopener noreferrer',\n    target: '_blank',\n    type: 'button',\n    'aria-label': 'GitHub profile link',\n  });\n  gitHubLogoLink.appendChild(gitHubSVG);\n\n  return gitHubLogoLink;\n}","import { createElement } from \"../../../utilities/random-utilities\";\n\nimport { PlayerGameboardComponent } from \"../../../components/player-gameboard-component/player-gameboard-component\";\nimport { OpponentGameboardComponent } from \"../../../components/opponent-gameboard-component/opponent-gameboard-component\";\n\nexport class MainContainerTwo {\n  private readonly mainContainerTwo: HTMLElement;\n  \n  constructor(\n    private readonly playerGameboardComponent: PlayerGameboardComponent,\n    private readonly opponentGameboardComponent: OpponentGameboardComponent\n  ) {\n    this.mainContainerTwo = createElement('section', ['main-container'], {\n      id: 'main-container-two',\n    });\n  }\n\n  get getPlayerGameboardComponent() {\n    return this.playerGameboardComponent;\n  }\n\n  render(targetElement: HTMLElement) {\n    this.playerGameboardComponent.render(this.mainContainerTwo);\n    this.opponentGameboardComponent.render(this.mainContainerTwo);\n\n    targetElement.appendChild(this.mainContainerTwo);\n  }\n}\n\n","// ðŸ’­ Pub-sub/Mediator Pattern\n\ntype Listener<T = any> = (data: T) => void;\n\nclass EventBus {\n  private events: Record<string, Array<Listener>> = {};\n\n  /**\n   * Register a listener for a specific event.\n   * @param eventName - The name of the event.\n   * @param fn - The callback function to register.\n   */\n  on<T>(eventName: string, fn: Listener<T>): void {\n    this.events[eventName] = this.events[eventName] || [];\n    this.events[eventName].push(fn);\n  }\n\n  /**\n   * Unregister a listener for a specific event.\n   * @param eventName - The name of the event.\n   * @param fn - The callback function to remove.\n   */\n  off<T>(eventName: string, fn: Listener<T>): void {\n    if (this.events[eventName]) {\n      this.events[eventName] = this.events[eventName].filter(\n        (listener) => listener !== fn\n      );\n    }\n  }\n\n  /**\n   * Emit an event, calling all listeners registered for it.\n   * @param eventName - The name of the event.\n   * @param data - The data to pass to the listeners (optional).\n   */\n  emit<T>(eventName: string, data?: T): void {\n    if (this.events[eventName]) {\n      this.events[eventName].forEach((fn) => fn(data));\n    }\n  }\n}\n\nconst GlobalEventBus = new EventBus();\n\nexport default GlobalEventBus;","import './player-gameboard-component.scss';\nimport { BattleshipFleetBuilder } from '../../logic/bs-fleet-builder/bs-fleet-builder';\nimport { BattleshipBoardController } from '../../logic/bs-gameboard-controller/bs-gameboard-controller';\nimport { GridPlacementValue } from '../../types/css-types';\nimport {\n  Coordinates,\n  CoordinatesArray,\n  Fleet,\n  Gameboard,\n  Orientation,\n  ShipLength,\n  ShipSymbolValue,\n  ShipSymbolValueArray,\n  ShipType,\n} from '../../types/logic-types';\nimport { PlayerState } from '../../types/state-types';\nimport GlobalEventBus from '../../utilities/event-bus';\nimport {\n  isOrientation,\n  isShipLength,\n  isShipType,\n} from '../../utilities/logic-utilities';\nimport {\n  areArraysEqual,\n  createElement,\n  getConvertedTypeFromAttr,\n} from '../../utilities/random-utilities';\nimport {\n  CloneSnapOffset,\n  DragState,\n  ShipBorderValueSplit,\n} from '../component-types';\n\nexport class PlayerGameboardComponent {\n  public id: string = 'player';\n  public boardContainer: HTMLElement;\n  private gameboard: DocumentFragment;\n  private fleetElements: Set<HTMLDivElement> = new Set();\n  private dragImage: HTMLImageElement;\n  private shipDragClone: HTMLDivElement;\n\n  constructor(public readonly playerState: PlayerState) {\n    this.boardContainer = this.generateBoardContainer(\n      this.playerState.gameboardBuilder.boardSize\n    );\n\n    this.gameboard = this.generateBoardFragment(\n      this.playerState.gameboardBuilder.boardSize\n    );\n    this.dragImage = this.createDragImage();\n    this.shipDragClone = this.createShipDragClone();\n\n    // ! add ID to this ? or create event bus for each player gameboard instance?\n    GlobalEventBus.on('updateGameboard', (boardContainer: HTMLDivElement) => {\n      this.updateGameboard(boardContainer);\n    });\n  }\n\n  public render(targetElement: HTMLElement): void {\n    if (!targetElement) {\n      throw new Error(\n        `Target element not found with ID - ${this.id} and selector - \"${targetElement}\".`\n      );\n    }\n\n    this.boardContainer.append(\n      this.dragImage,\n      this.shipDragClone,\n      this.gameboard\n    );\n    this.handleFleetPlacement(\n      this.playerState.fleetBuilder,\n      this.fleetElements\n    );\n\n    targetElement.appendChild(this.boardContainer);\n  }\n\n  // ðŸ’­ --------------------------------------------------------------\n  // ðŸ’­ Helpers\n\n  // private appendFleetClonesToGameboard(fleetElements: Set<HTMLDivElement>) {\n  //   const gameboard: HTMLDivElement | null =\n  //     this.boardContainer.querySelector('.gameboard');\n\n  //   if (!gameboard) throw new Error('Gameboard not found');\n\n  //   fleetElements.forEach((shipElement) => {\n  //     const shipCloneElement: HTMLDivElement = createElement(\n  //       'div',\n  //       ['ship-container-clone'],\n  //       {\n  //         id: `${shipElement.getAttribute('id')}-clone`,\n  //       }\n  //     );\n\n  //     gameboard.appendChild(shipCloneElement);\n  //   });\n  // }\n\n  private createDragImage(): HTMLImageElement {\n    const invisibleImage = createElement(\n      'img',\n      ['drag-image', 'accessibility'],\n      {\n        id: `${this.id}-drag-image`,\n        src: 'https://cyclone-studios.s3.us-east-2.amazonaws.com/s3_misc-images/1x1_transparent.png',\n      }\n    );\n\n    return invisibleImage;\n  }\n\n  private createShipDragClone(): HTMLDivElement {\n    const shipCloneElement: HTMLDivElement = createElement(\n      'div',\n      ['ship-container-clone'],\n      {\n        id: `${this.id}-ship-drag-clone`,\n      }\n    );\n\n    return shipCloneElement;\n  }\n\n  private createBackgroundCellsFragment(\n    gameboard: Gameboard\n  ): DocumentFragment {\n    const cellFragment: DocumentFragment = new DocumentFragment();\n\n    gameboard.forEach((row: ShipSymbolValueArray, rowIndex) => {\n      row.forEach((symbol: ShipSymbolValue, colIndex) => {\n        const symbolDescription: string = symbol.description!.toLowerCase();\n\n        const gridCell: HTMLDivElement = createElement(\n          'div',\n          [\n            `${this.id}-${symbolDescription}-cell`,\n            `player-${symbolDescription}-cell`,\n            'grid-cell',\n          ],\n          {\n            'data-x': colIndex.toString(),\n            'data-y': rowIndex.toString(),\n            'aria-label': `Row ${rowIndex + 1}, Column ${colIndex + 1}`,\n            role: 'gridCell',\n          }\n        );\n\n        const gridCellContainer: HTMLDivElement = createElement('div', [\n          `${this.id}-${symbolDescription}-grid-cell-container`,\n          'grid-cell-container',\n        ]);\n\n        gridCellContainer.appendChild(gridCell);\n        cellFragment.appendChild(gridCellContainer);\n      });\n    });\n\n    return cellFragment;\n  }\n\n  private createShipElement(\n    shipType: ShipType,\n    shipLength: ShipLength,\n    gridPlacementValue: string,\n    gridCrossAxis: number,\n    orientation: Orientation\n  ): HTMLDivElement {\n    const shipUnitFragment: DocumentFragment = this.generateShipUnitFragment(\n      shipLength,\n      shipType,\n      orientation,\n      this.id\n    );\n\n    const shipContainerElement: HTMLDivElement = createElement(\n      'div',\n      ['ship-container'],\n      {\n        id: `${this.id}-${shipType}-container`,\n        'data-shipType': shipType,\n        'data-length': shipLength.toString(),\n        'data-orientation': orientation,\n        draggable: 'true',\n      }\n    );\n\n    shipContainerElement.appendChild(shipUnitFragment);\n\n    const isHorizontal: boolean = orientation === 'horizontal';\n    if (isHorizontal) {\n      shipContainerElement.style.gridColumn = gridPlacementValue;\n      shipContainerElement.style.gridRow = gridCrossAxis.toString();\n      shipContainerElement.style.gridTemplateColumns = `repeat(${shipLength}, 1fr)`;\n    } else {\n      shipContainerElement.style.gridRow = gridPlacementValue;\n      shipContainerElement.style.gridColumn = gridCrossAxis.toString();\n      shipContainerElement.style.gridTemplateRows = `repeat(${shipLength}, 1fr)`;\n    }\n\n    return shipContainerElement;\n  }\n\n  private generateBoardContainer(boardSize: number): HTMLElement {\n    const gameboardContainer: HTMLElement = createElement(\n      'section',\n      ['gameboard-container'],\n      {\n        id: `${this.id}-gameboard-container`,\n      }\n    );\n\n    gameboardContainer.style.setProperty('--grid-size', boardSize.toString());\n\n    this.handleDragListeners(gameboardContainer);\n    this.handleClickListeners(gameboardContainer);\n\n    return gameboardContainer;\n  }\n\n  private generateBoardFragment(boardSize: number): DocumentFragment {\n    const gameboardBackground: HTMLDivElement = createElement(\n      'div',\n      ['gameboard-background'],\n      {\n        id: `${this.id}-gameboard-background`,\n      }\n    );\n    gameboardBackground.appendChild(\n      this.createBackgroundCellsFragment(\n        this.playerState.gameboardBuilder.board\n      )\n    );\n\n    const gameboard = createElement('div', ['gameboard'], {\n      id: `${this.id}-gameboard`,\n    });\n    gameboard.style.setProperty('--grid-size', boardSize.toString());\n\n    const boardFragment: DocumentFragment = new DocumentFragment();\n    boardFragment.append(gameboardBackground, gameboard);\n\n    return boardFragment;\n  }\n\n  private generateShipUnitFragment(\n    shipLength: ShipLength,\n    shipType: ShipType,\n    orientation: Orientation,\n    id: string\n  ): DocumentFragment {\n    const shipUnitFragment: DocumentFragment = new DocumentFragment();\n\n    for (let i = 0; i < shipLength; i++) {\n      const isBow: boolean = i === 0;\n      const isStern: boolean = i === shipLength - 1;\n      const shipUnit: HTMLDivElement = createElement('div', [\n        'ship-unit',\n        `${shipType}-unit`,\n        `${id}-${shipType}-unit`,\n      ]);\n\n      const isHorizontal: boolean = orientation === 'horizontal';\n\n      isHorizontal\n        ? shipUnit.classList.add('ship-unit-horizontal')\n        : shipUnit.classList.add('ship-unit-vertical');\n\n      if (isBow) {\n        shipUnit.classList.add('ship-bow');\n        shipUnit.setAttribute('id', `${id}-${shipType}-bow`);\n      }\n\n      if (isStern) {\n        shipUnit.classList.add('ship-stern');\n        shipUnit.setAttribute('id', `${id}-${shipType}-stern`);\n      }\n\n      shipUnitFragment.appendChild(shipUnit);\n    }\n\n    return shipUnitFragment;\n  }\n\n  private getGridPlacementValue(\n    coordinates: Coordinates,\n    orientation: Orientation,\n    shipLength: ShipLength\n  ): [GridPlacementValue, number] {\n    const isHorizontal = orientation === 'horizontal';\n\n    const [x, y] = coordinates;\n    const gridStartMain = isHorizontal ? x + 1 : y + 1;\n    const gridCrossAxis = isHorizontal ? y + 1 : x + 1;\n\n    return [`${gridStartMain} / span ${shipLength}`, gridCrossAxis];\n  }\n\n  private handleFleetPlacement(\n    fleetBuilder: BattleshipFleetBuilder,\n    fleetElements: Set<HTMLDivElement>\n  ) {\n    this.updateFleetElements(fleetBuilder);\n    this.placeFleetOnGameboard(fleetElements);\n  }\n\n  private placeFleetOnGameboard(fleetElements: Set<HTMLDivElement>): void {\n    const gameboard =\n      this.boardContainer.querySelector<HTMLDivElement>('.gameboard');\n\n    if (!gameboard) {\n      throw new Error('Gameboard container not found.');\n    }\n\n    fleetElements.forEach((shipElement) => gameboard.appendChild(shipElement));\n  }\n\n  private updateFleetElements = (fleetBuilder: BattleshipFleetBuilder) => {\n    if (this.fleetElements.size) this.fleetElements.clear();\n\n    for (const ship of Object.values(fleetBuilder.fleet)) {\n      const shipType: ShipType = ship.type;\n      const shipLength: ShipLength = ship.length;\n\n      const orientation: Orientation | null =\n        ship.currentplacementConfigurations.orientation;\n\n      if (!orientation) throw new Error('Orientation not set.');\n\n      const coordinatesArray: CoordinatesArray | null =\n        ship.currentplacementConfigurations.coordinatesArray;\n\n      if (!coordinatesArray || coordinatesArray.length === 0) {\n        console.error(`The ${shipType} has not been placed. Continuing...`);\n        continue;\n      }\n\n      const [x, y]: Coordinates = coordinatesArray[0];\n      const [gridPlacementValue, gridCrossAxis]: [GridPlacementValue, number] =\n        this.getGridPlacementValue([x, y], orientation, shipLength);\n\n      const shipElement: HTMLDivElement = this.createShipElement(\n        shipType,\n        shipLength,\n        gridPlacementValue,\n        gridCrossAxis,\n        orientation\n      );\n\n      this.fleetElements.add(shipElement);\n    }\n  };\n\n  private updateGameboard(boardContainer: HTMLElement) {\n    const gameboard = boardContainer.querySelector(`#${this.id}-gameboard`);\n    const gameboardBackground = boardContainer.querySelector(\n      `#${this.id}-gameboard-background`\n    );\n\n    if (!gameboard || !gameboardBackground)\n      throw new Error('Missing gameboard and/or gameboard background elements');\n\n    this.boardContainer.removeChild(gameboard);\n    this.boardContainer.removeChild(gameboardBackground);\n    this.shipDragClone.classList.remove('visible');\n\n    this.gameboard = this.generateBoardFragment(\n      this.playerState.gameboardBuilder.boardSize\n    );\n\n    this.boardContainer.appendChild(this.gameboard);\n\n    this.handleFleetPlacement(\n      this.playerState.fleetBuilder,\n      this.fleetElements\n    );\n  }\n\n  // ðŸ’­ --------------------------------------------------------------\n  // ðŸ’­ HTML Drag and Drop API (Repositioning)\n\n  private handleDragListeners(gameboardContainer: HTMLElement) {\n    const dragState: DragState = {\n      currentShipInstance: null,\n      initialPlacementConfigurations: null,\n      isValidDropTarget: false,\n      currentDragOverCell: null,\n      cloneSnapOffset: null,\n      shipBorderValueSplit: null,\n    };\n\n    // Save each as function\n    gameboardContainer.addEventListener('dragstart', (e: DragEvent) => {\n      this.handleShipDragStart(e, dragState);\n    });\n    gameboardContainer.addEventListener('drag', (e: DragEvent) => {\n      this.handleShipDrag(e, dragState);\n    });\n    gameboardContainer.addEventListener('dragenter', (e: DragEvent) => {\n      this.handleShipDragEnter(e);\n    });\n    gameboardContainer.addEventListener('dragleave', (e: DragEvent) => {\n      this.handleShipDragLeave(e);\n    });\n    gameboardContainer.addEventListener('dragover', (e: DragEvent) => {\n      this.handleShipDragOver(e, dragState);\n    });\n    gameboardContainer.addEventListener('drop', (e: DragEvent) => {\n      this.handleShipDrop(e, dragState);\n    });\n    gameboardContainer.addEventListener('dragend', (e: DragEvent) => {\n      this.handleShipDragEnd(e, dragState);\n    });\n  }\n\n  private handleShipDragStart(e: DragEvent, dragState: DragState) {\n    if (\n      !(e.target instanceof HTMLDivElement) ||\n      !e.target.matches('.ship-container')\n    )\n      return;\n\n    const setInitialDragStyles = (\n      shipContainerElement: HTMLDivElement\n    ): void => {\n      // Lower Ship Container Opacity\n      shipContainerElement.classList.add('lower-opacity');\n\n      // TODO: Make this less hacky ðŸ«  by adding class instead?\n      // Enable drag events for grid cells under ship containers\n      setTimeout(() => {\n        shipContainerElement.style.pointerEvents = 'none';\n      }, 0);\n\n      // Make clone visible\n      this.shipDragClone.classList.add('visible');\n    };\n    const setCloneDimensions = (\n      shipContainer: HTMLDivElement,\n      shipClone: HTMLDivElement\n    ) => {\n      const shipBoundingRect = shipContainer.getBoundingClientRect();\n      shipClone.style.height = `${shipBoundingRect.height}px`;\n      shipClone.style.width = `${shipBoundingRect.width}px`;\n    };\n    const getCloneSnapOffset = (\n      shipContainerElement: HTMLDivElement,\n      orientation: Orientation,\n      dragState: DragState\n    ): CloneSnapOffset => {\n      const getShipBow = (\n        shipContainerElement: HTMLDivElement\n      ): HTMLDivElement => {\n        const shipBow: HTMLDivElement | null =\n          shipContainerElement.querySelector(`.ship-bow`);\n        if (!shipBow) throw new Error('Ship bow not found.');\n        return shipBow;\n      };\n\n      // Get ship bow element (cursor snap position)\n      const shipBow: HTMLDivElement = getShipBow(shipContainerElement);\n\n      // Get border of ship border to include in offset calculations\n      const shipBorderSize = getComputedStyle(document.documentElement)\n        .getPropertyValue('--ship-container-border-size')\n        .trim();\n\n      const match = shipBorderSize.match(\n        /^(?<numberValue>\\d+(\\.\\d+)?)(?<unitType>[a-z%]+)$/i\n      );\n\n      /* \n       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n       â”‚ REGARDING ABOVE â¤´ï¸ ðŸ’­â€¦                                                       â”‚\n       â”‚                                                                             â”‚\n       â”‚ Use ES2018 named match groups syntax to extract CSS variable values.        â”‚\n       â”‚                                                                             â”‚\n       â”‚ (\\d+(\\.\\d+)?) matches any number of digits as  (primary capturing group)    â”‚\n       â”‚                                                                             â”‚\n       â”‚ This is followed by an optional subgroup (\\.\\d+) for a decimal point        â”‚\n       â”‚ and fractional                                                              â”‚\n       â”‚ digits.                                                                     â”‚\n       â”‚                                                                             â”‚\n       â”‚ This allows the entire first capturing group (\\d+(\\.\\d+)?) to match          â”‚\n       â”‚ integers or floating-point                                                   â”‚\n       â”‚ numbers.                                                                    â”‚\n       â”‚                                                                             â”‚  \n       â”‚ The ?<numberValue> syntax names the capturing group, storing it in          â”‚\n       â”‚ `match.groups` for easy                                                     â”‚\n       â”‚ access.                                                                     â”‚\n       â”‚                                                                             â”‚  \n       â”‚ This is destructured to extract potential floating-point numbers             â”‚\n       â”‚ representing the ship's border                                              â”‚\n       â”‚ size.                                                                       â”‚\n       â”‚                                                                             â”‚\n       â”‚ The script dynamically updates the border size by reading the value         â”‚\n       â”‚ directly from the SCSS                                                      â”‚\n       â”‚ file.                                                                        â”‚\n       â”‚                                                                             â”‚  \n       â”‚ Currently, it only supports border sizes specified in pixels, but            â”‚\n       â”‚ the `unitType` match group could be used to support other unit types        â”‚\n       â”‚ in the future.                                                              â”‚\n       â”‚                                                                             â”‚  \n       â”‚ I don't feel like doing all that right now. ðŸ’­                               |\n       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n      */\n\n      if (!match || !match.groups)\n        throw new Error('No matches found when parsing');\n\n      const shipBorderValueSplit = match.groups as ShipBorderValueSplit;\n\n      dragState.shipBorderValueSplit = shipBorderValueSplit;\n\n      const isHorizontal: boolean = orientation === 'horizontal';\n\n      const [offsetX, offsetY] = isHorizontal\n        ? [\n            shipBow.getBoundingClientRect().width / 2,\n            shipBow.getBoundingClientRect().height / 2 +\n              Number(shipBorderValueSplit.numberValue),\n          ]\n        : [\n            shipBow.getBoundingClientRect().width / 2 +\n              Number(shipBorderValueSplit.numberValue),\n            shipBow.getBoundingClientRect().height / 2,\n          ];\n\n      const cloneSnapOffset: CloneSnapOffset = {\n        offsetX,\n        offsetY,\n      };\n\n      return cloneSnapOffset;\n    };\n    const classifyValidCellCoordinates = (\n      boardContainer: HTMLElement,\n      shipContainerElement: HTMLDivElement,\n      orientation: Orientation,\n      gameboardController: BattleshipBoardController\n    ): void => {\n      const shipLengthAttr: number | null = Number(\n        shipContainerElement.getAttribute('data-length')\n      );\n      if (!shipLengthAttr || !isShipLength(shipLengthAttr)) {\n        throw new Error('Invalid or missing ship type attribute.');\n      }\n\n      const classifyValidBowCells = (\n        gridCells: NodeListOf<HTMLDivElement>,\n        shipLength: ShipLength,\n        orientation: Orientation\n      ) => {\n        const allValidBowCoordinates: Set<Coordinates> =\n          gameboardController.getAllValidBowCoordinates(\n            orientation,\n            shipLength\n          );\n\n        gridCells.forEach((gridCell: HTMLDivElement) => {\n          const gridCellCoordinates: Coordinates = [\n            Number(gridCell.getAttribute('data-x')),\n            Number(gridCell.getAttribute('data-y')),\n          ];\n\n          for (const validBowCoordinates of allValidBowCoordinates) {\n            if (!areArraysEqual(validBowCoordinates, gridCellCoordinates))\n              continue;\n            gridCell.classList.add('valid-bow-coordinates');\n          }\n        });\n      };\n\n      const shipLength: ShipLength = shipLengthAttr;\n\n      const gridCells: NodeListOf<HTMLDivElement> =\n        boardContainer.querySelectorAll('.grid-cell');\n\n      classifyValidBowCells(gridCells, shipLength, orientation);\n    };\n    const updateDragState = (\n      dragState: DragState,\n      fleet: Fleet,\n      shipType: ShipType,\n      cloneSnapOffset: CloneSnapOffset\n    ) => {\n      // Ensure the ship type exists in the fleet\n      if (!fleet[shipType])\n        throw new Error(`The ${shipType} is not present in the fleet.`);\n\n      // Set the current ship instance and its initial configurations\n      dragState.currentShipInstance = fleet[shipType];\n      dragState.initialPlacementConfigurations =\n        dragState.currentShipInstance.currentplacementConfigurations;\n      dragState.cloneSnapOffset = cloneSnapOffset;\n    };\n\n    const shipContainerElement: HTMLDivElement = e.target;\n    const orientation: Orientation = getConvertedTypeFromAttr(\n      shipContainerElement,\n      'data-orientation',\n      isOrientation\n    );\n\n    const fleet: Fleet = this.playerState.fleetBuilder.fleet;\n    const shipType: ShipType = getConvertedTypeFromAttr(\n      shipContainerElement,\n      'data-shiptype',\n      isShipType\n    );\n\n    const cloneSnapOffset: CloneSnapOffset = getCloneSnapOffset(\n      shipContainerElement,\n      orientation,\n      dragState\n    );\n\n    updateDragState(dragState, fleet, shipType, cloneSnapOffset);\n\n    if (!dragState.currentShipInstance)\n      throw new Error(\n        `Drag state hasn't been updated with the current ship instance on drag start. Drag State: ${JSON.stringify(\n          dragState\n        )}`\n      );\n\n    // Remove the piece from the gameboard (non-null ensured by `setUpShipForDrag`)\n    this.playerState.gameboardController.removePiece(\n      dragState.currentShipInstance\n    );\n\n    // Set drag image to be transparent 1 x 1 png\n    e.dataTransfer?.setDragImage(this.dragImage, 0, 0);\n\n    setCloneDimensions(shipContainerElement, this.shipDragClone);\n    setInitialDragStyles(shipContainerElement);\n    classifyValidCellCoordinates(\n      this.boardContainer,\n      shipContainerElement,\n      orientation,\n      this.playerState.gameboardController\n    );\n    this.snapCloneToCursor(e, cloneSnapOffset);\n  }\n\n  private handleShipDrag(e: DragEvent, dragState: DragState) {\n    if (\n      !(e.target instanceof HTMLDivElement) ||\n      !e.target.matches('.ship-container')\n    )\n      return;\n\n    const cloneSnapOffset: CloneSnapOffset | null = dragState.cloneSnapOffset;\n\n    if (!cloneSnapOffset)\n      throw new Error(\n        'An error has occured during the `cloneSnapOffset` reading.'\n      );\n\n    this.snapCloneToCursor(e, cloneSnapOffset);\n  }\n\n  private handleShipDragEnter(e: DragEvent) {\n    if (\n      !(e.target instanceof HTMLDivElement) ||\n      !e.target.matches('.grid-cell')\n    )\n      return;\n\n    const gridCell: HTMLDivElement = e.target;\n\n    // Check if current grid cell is valid for placement\n    const areValidBowCoordinates: boolean = gridCell.classList.contains(\n      'valid-bow-coordinates'\n    );\n\n    // Add appropriate visual feedback class to grid cell\n    areValidBowCoordinates\n      ? gridCell.classList.add('placement-is-valid')\n      : gridCell.classList.add('placement-is-invalid');\n\n    // Add appropriate visual feedback class to ship drag clone\n    if (areValidBowCoordinates)\n      this.shipDragClone.classList.add('placement-is-valid');\n  }\n\n  private handleShipDragLeave(e: DragEvent) {\n    if (\n      !(e.target instanceof HTMLDivElement) ||\n      !e.target.matches('.grid-cell')\n    )\n      return;\n\n    const gridCell: HTMLDivElement = e.target;\n\n    const areValidBowCoordinates: boolean =\n      gridCell.classList.contains('placement-is-valid');\n\n    // Remove assigned visual feedback class from grid cell\n    areValidBowCoordinates\n      ? gridCell.classList.remove('placement-is-valid')\n      : gridCell.classList.remove('placement-is-invalid');\n\n    // Remove assigned visual feedback class from ship drag clone\n    if (this.shipDragClone.classList.contains('placement-is-valid'))\n      this.shipDragClone.classList.remove('placement-is-valid');\n  }\n\n  private handleShipDragOver(e: DragEvent, dragState: DragState) {\n    // Enables the drop event to fire\n    e.preventDefault();\n\n    if (\n      !(e.target instanceof HTMLDivElement) ||\n      !e.target.matches('.grid-cell')\n    )\n      return;\n\n    const gridCell: HTMLDivElement = e.target;\n\n    // Update drag state for cleanup\n    dragState.currentDragOverCell = gridCell;\n\n    // Prevent further operations for invalid cells\n    if (!gridCell.classList.contains('valid-bow-coordinates')) return;\n  }\n\n  private handleShipDrop(e: DragEvent, dragState: DragState) {\n    e.preventDefault();\n\n    if (\n      !(e.target instanceof HTMLDivElement) ||\n      !e.target.matches('.valid-bow-coordinates')\n    )\n      return;\n\n    // Validate and modify state\n    const { coordinatesArray, orientation: initialOrientation } =\n      dragState.initialPlacementConfigurations || {};\n\n    if (!coordinatesArray || !initialOrientation) {\n      throw new Error('Initial placement configurations are incomplete.');\n    }\n\n    dragState.isValidDropTarget = true;\n\n    const validGridCell: HTMLDivElement = e.target;\n\n    // Retrieve new coordinates from the valid grid cell\n    const xAttr = validGridCell.getAttribute('data-x');\n    const yAttr = validGridCell.getAttribute('data-y');\n    if (!xAttr || !yAttr) {\n      throw new Error('Missing or invalid grid cell coordinates.');\n    }\n    const newCoordinates: Coordinates = [Number(xAttr), Number(yAttr)];\n\n    this.playerState.gameboardController.placePiece({\n      ship: dragState.currentShipInstance!,\n      coordinates: newCoordinates,\n      orientation: initialOrientation,\n    });\n\n    // Re-renders board with new ship placement\n    this.updateGameboard(this.boardContainer);\n\n    // Reset valid drop target state\n    dragState.isValidDropTarget = false;\n  }\n\n  private handleShipDragEnd(e: DragEvent, dragState: DragState) {\n    if (\n      !(e.target instanceof HTMLDivElement) ||\n      !e.target.matches('.ship-container')\n    )\n      return;\n\n    const resetShipPosition = (): void => {\n      const { coordinatesArray, orientation: initialOrientation } =\n        dragState.initialPlacementConfigurations || {};\n      if (!coordinatesArray || !initialOrientation) {\n        throw new Error('Initial placement configurations are incomplete.');\n      }\n\n      // Get bow coordinates\n      const initialBowCoordinates: Coordinates = coordinatesArray[0];\n\n      // Re-place ship on logic gameboard\n      this.playerState.gameboardController.placePiece({\n        ship: dragState.currentShipInstance!,\n        coordinates: initialBowCoordinates,\n        orientation: initialOrientation,\n      });\n    };\n\n    const removeDragStyles = (\n      shipContainerElement: HTMLDivElement,\n      currentDragOverCell: HTMLDivElement,\n      isValidDropTarget: boolean\n    ): void => {\n      const cellFeedbackClass: string = isValidDropTarget\n        ? 'placement-is-valid'\n        : 'placement-is-invalid';\n\n      // Lower grid cell validation pseudo-element opacity\n      currentDragOverCell.classList.remove(cellFeedbackClass);\n\n      // Lower ship container opacity\n      shipContainerElement.classList.remove('lower-opacity');\n\n      // Re-hide drag clone\n      this.shipDragClone.classList.remove('visible');\n\n      // Restore ship container draggability\n      shipContainerElement.style.pointerEvents = 'auto';\n    };\n\n    const shipContainerElement: HTMLDivElement = e.target;\n\n    try {\n      const { currentDragOverCell, isValidDropTarget } = dragState;\n\n      if (!currentDragOverCell)\n        throw new Error(\n          `Current drag over cell is missing. Drag state: ${JSON.stringify(\n            dragState\n          )}`\n        );\n\n      removeDragStyles(\n        shipContainerElement,\n        currentDragOverCell,\n        isValidDropTarget\n      );\n\n      if (!isValidDropTarget) {\n        resetShipPosition();\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  private snapCloneToCursor(\n    e: DragEvent,\n    cloneSnapOffset: CloneSnapOffset\n  ): void {\n    const gameboardClientRect: DOMRect =\n      this.boardContainer.getBoundingClientRect();\n    const gameboardOffsetX: number = gameboardClientRect.left;\n    const gameboardOffsetY: number = gameboardClientRect.top;\n\n    const cursorX: number = e.clientX;\n    const cursorY: number = e.clientY;\n\n    const { offsetX, offsetY }: CloneSnapOffset = cloneSnapOffset;\n\n    document.documentElement.style.setProperty(\n      '--ship-clone-left',\n      `${cursorX - gameboardOffsetX - offsetX}px`\n    );\n\n    document.documentElement.style.setProperty(\n      '--ship-clone-top',\n      `${cursorY - gameboardOffsetY - offsetY}px`\n    );\n  }\n\n  // ðŸ’­ --------------------------------------------------------------\n  // ðŸ’­ Handle Ship Click (Rotation)\n\n  private handleClickListeners(gameboardContainer: HTMLElement) {\n    gameboardContainer.addEventListener('click', (e: MouseEvent) => {\n      this.handleShipRotation(e);\n    });\n  }\n\n  private handleShipRotation(e: MouseEvent) {\n    if (\n      !(e.target instanceof HTMLDivElement) ||\n      !e.target.matches('.ship-container')\n    )\n      return;\n\n    const shipContainerElement: HTMLDivElement = e.target;\n\n    const shipType: ShipType = getConvertedTypeFromAttr(\n      shipContainerElement,\n      'data-shiptype',\n      isShipType\n    );\n\n    const ship = this.playerState.fleetBuilder.getShip(shipType);\n\n    this.playerState.gameboardController.rotatePiece(ship);\n    this.updateGameboard(this.boardContainer);\n  }\n\n  // ðŸ’­ --------------------------------------------------------------\n  // ðŸ’­ Utilities\n\n  // TODO: Do I need this\n  public getId(): string {\n    return this.id;\n  }\n}\n","import {\n  Gameboard,\n  ShipSymbolValue,\n  ShipSymbolValueArray\n} from '../../types/logic-types';\nimport {\n  createElement\n} from '../../utilities/random-utilities';\nimport { PlayerState } from '../../types/state-types';\n\nexport class OpponentGameboardComponent {\n  private readonly id: string = 'opponent';\n  private boardContainer: HTMLDivElement;\n\n  constructor(\n    public readonly playerState: PlayerState\n  ) {\n    this.boardContainer = this.generateBoardContainer(\n      this.playerState.gameboardBuilder.boardSize\n    );\n  }\n\n  public render(targetElement: HTMLElement): void {\n    if (!targetElement) {\n      throw new Error(\n        `Target element not found with ID - ${this.id} and selector - \"${targetElement}\".`\n      );\n    }\n\n    const gameboard: DocumentFragment = this.generateBoardFragment(\n      this.playerState.gameboardBuilder.boardSize\n    );\n\n    this.boardContainer.appendChild(gameboard);\n    \n    targetElement.appendChild(this.boardContainer);\n  }\n\n  // ðŸ’­ --------------------------------------------------------------\n  // ðŸ’­ Helpers\n\n  private createBackgroundCellsFragment(\n    gameboard: Gameboard\n  ): DocumentFragment {\n    const cellFragment: DocumentFragment = new DocumentFragment();\n\n    gameboard.forEach((row: ShipSymbolValueArray, rowIndex: number) => {\n      row.forEach((_: ShipSymbolValue, colIndex: number) => {\n        const gridCell: HTMLDivElement = createElement(\n          'div',\n          [`${this.id}-cell`, 'grid-cell'],\n          {\n            'data-x': colIndex.toString(),\n            'data-y': rowIndex.toString(),\n            'aria-label': `Row ${rowIndex + 1}, Column ${colIndex + 1}`,\n            role: 'gridCell',\n          }\n        );\n\n        const gridCellContainer: HTMLDivElement = createElement('div', [\n          `${this.id}-grid-cell-container`,\n          'grid-cell-container',\n        ]);\n\n        gridCellContainer.appendChild(gridCell);\n        cellFragment.appendChild(gridCellContainer);\n      });\n    });\n\n    return cellFragment;\n  }\n\n  private generateBoardContainer(boardSize: number): HTMLDivElement {\n    const gameboardContainer: HTMLDivElement = createElement(\n      'div',\n      ['gameboard-container'],\n      {\n        id: `${this.id}-gameboard-container`,\n      }\n    );\n\n    gameboardContainer.style.setProperty('--grid-size', boardSize.toString());\n\n    return gameboardContainer;\n  }\n\n  private generateBoardFragment(boardSize: number): DocumentFragment {\n    const gameboardBackground: HTMLDivElement = createElement(\n      'div',\n      ['gameboard-background'],\n      {\n        id: `${this.id}-gameboard-background`,\n      }\n    );\n    gameboardBackground.appendChild(\n      this.createBackgroundCellsFragment(\n        this.playerState.gameboardBuilder.board\n      )\n    );\n\n    const gameboard = createElement('div', ['gameboard'], {\n      id: `${this.id}-gameboard`,\n    });\n    gameboard.style.setProperty('--grid-size', boardSize.toString());\n\n    const boardFragment: DocumentFragment = new DocumentFragment();\n    boardFragment.append(gameboardBackground, gameboard);\n\n    return boardFragment;\n  }\n\n  // ðŸ’­ --------------------------------------------------------------\n  // ðŸ’­ Utilities\n\n  // TODO: Do I need this\n  public getId(): string {\n    return this.id;\n  }\n}\n","import { createElement } from \"./random-utilities\";\n\n/**\n * A container for dynamically swapping and managing fragments of the DOM.\n * \n * @class HotSwapContainer\n * @param {keyof HTMLElementTagNameMap} elementTag - The HTML element tag for the container (e.g., 'section', 'div').\n * @param {{ [key: string]: DocumentFragment }} fragments - A collection of swappable fragments, keyed by string identifiers.\n * @param {string} initialFragmentKey - The key of the initial fragment to render in the container.\n * @param {string[]} [classNames=[]] - An array of class names to apply to the container element (optional).\n * @param {Record<string, string>} [attributes={}] - A set of attributes to apply to the container element (optional).\n */\nexport class HotSwapContainer {\n  private readonly hotSwapContainer: HTMLElement;\n\n  constructor(\n    private readonly elementTag: keyof HTMLElementTagNameMap,\n    private readonly fragments: { [key: string]: DocumentFragment },\n    private readonly initialFragmentKey: string,\n    private readonly classNames: string[] = [],\n    private readonly attributes: Record<string, string> = {}\n  ) {\n    if (!fragments[initialFragmentKey]) {\n      throw new Error(\n        `Initial fragment with key \"${initialFragmentKey}\" does not exist.`\n      );\n    }\n\n    this.hotSwapContainer = createElement(\n      this.elementTag,\n      this.classNames,\n      this.attributes\n    );\n\n    this.hotSwapContainer.appendChild(this.fragments[this.initialFragmentKey]);\n  }\n\n  public render(targetElement: HTMLElement) {\n    targetElement.appendChild(this.hotSwapContainer);\n  }\n\n  public replaceFragment(fragment: DocumentFragment) {\n    this.hotSwapContainer.replaceChildren(fragment);\n  }\n\n  public replaceFragmentByKey(key:string): void {\n    const fragment = this.getFragment(key);\n    this.replaceFragment(fragment);\n  }\n\n  private getFragment(key:string): DocumentFragment {\n    const fragment = this.fragments[key];\n    if (!fragment) {\n      throw new Error(`Fragment with key \"${key}\" does not exist.`);\n    }\n    return fragment;\n  }\n}","import { createElement } from \"../../../utilities/random-utilities\";\n\n// ðŸ’­ Main Container One Parabellum: Heading and Help Button\n\nexport function createMainOneParabellumFragment(): DocumentFragment {\n  const parabellumHeading = createElement('h2');\n  parabellumHeading.textContent = 'Parabellum';\n\n  const informationImage = createElement('img', [], {\n    id: 'information-image',\n    src: 'https://cdn-icons-png.flaticon.com/512/63/63830.png',\n  });\n\n  // ? to open instructions modal\n  const informationButton: HTMLButtonElement = createElement('button', [], {\n    id: 'information-button',\n  });\n  informationButton.appendChild(informationImage);\n\n  const informationButtonContainer: HTMLDivElement = createElement('div', [], {\n    id: 'information-button-container'\n  });\n  informationButtonContainer.appendChild(informationButton);\n\n  const mainContainerOneParabellumWrapper: HTMLDivElement = createElement(\n    'div',\n    ['parabellum'],\n    {\n      id: 'main-container-one-parabellum',\n    }\n  );\n  mainContainerOneParabellumWrapper.append(\n    parabellumHeading,\n    informationButtonContainer\n  );\n\n  const parabellumFragment: DocumentFragment = new DocumentFragment();\n  parabellumFragment.append(mainContainerOneParabellumWrapper);\n\n  return parabellumFragment;\n}","import { createElement } from '../../../utilities/random-utilities';\n\n// ðŸ’­ Main Container One Bellum: <Insert Here>\n// ! Player turn state text with hit, miss, sunken ship text notifications\n\nexport function createMainOneBellumFragment(): DocumentFragment {\n\n  // !\n\n  const mainContainerOneBellumWrapper: HTMLDivElement = createElement('div', ['bellum'], {\n    id: 'main-container-one-bellum',\n  });\n\n  const bellumFragment: DocumentFragment = new DocumentFragment();\n  bellumFragment.appendChild(mainContainerOneBellumWrapper);\n\n  return bellumFragment;\n}\n","import { createElement } from '../../../utilities/random-utilities';\n\n// ðŸ’­ Main Container One Post Bellum: <Insert Here>\n// ! Game over message with winner and loser text and a button to restart the game\n\nexport function createMainOnePostBellumFragment(): DocumentFragment {\n  // !\n\n  const mainContainerPostBellumWrapper: HTMLDivElement = createElement(\n    'div',\n    ['bellum'],\n    {\n      id: 'main-container-one-post-bellum',\n    }\n  );\n\n  const postBellumFragment: DocumentFragment = new DocumentFragment();\n  postBellumFragment.appendChild(mainContainerPostBellumWrapper);\n\n  return postBellumFragment;\n}","import { BattleshipBoardController } from \"../../logic/bs-gameboard-controller/bs-gameboard-controller\";\nimport { createElement } from \"../../utilities/random-utilities\";\nimport { Fleet } from \"../../types/logic-types\";\nimport { randomizeBSGameboard } from \"../../setup/randomize-bs-gameboard\";\nimport GlobalEventBus from \"../../utilities/event-bus\";\n\nexport class ShipShufflerButtonComponent {\n  private readonly shipShufflerButton: HTMLButtonElement;\n  private readonly shipShufflerButtonContainer: HTMLDivElement;\n  private readonly shipShufflerButtonTextContent: string = 'Shuffle';\n  private readonly buttonClass: string = 'ship-shuffler-button'\n\n  constructor(\n    private id: string,\n    private gameboardContainer: HTMLElement,\n    private gameboardController: BattleshipBoardController,\n    private fleet: Fleet,\n  ) {\n    this.shipShufflerButton = this.createshipShufflerButton(\n      `${this.id}-${this.buttonClass}`,\n      [this.buttonClass]\n    );\n    this.shipShufflerButton.classList.add(this.buttonClass);\n    this.shipShufflerButton.textContent = this.shipShufflerButtonTextContent;\n    this.addEventListener(this.shipShufflerButton);\n\n    this.shipShufflerButtonContainer = this.createshipShufflerButtonContainer();\n    this.shipShufflerButtonContainer.appendChild(this.shipShufflerButton);\n  }\n\n  public render(targetElement: HTMLElement) {\n    if (!targetElement) {\n      throw new Error(`Target element not found. Recieved ${targetElement}.`);\n    }\n\n    targetElement.appendChild(this.shipShufflerButtonContainer);\n  }\n\n  // ðŸ’­ --------------------------------------------------------------\n  // ðŸ’­ Helpers\n\n  private addEventListener(shipShufflerButton: HTMLButtonElement) {\n    shipShufflerButton.addEventListener('click', () => {\n      this.randomizeGameboard();\n      this.updateGameboard(this.gameboardContainer);\n    });\n  }\n\n  private createshipShufflerButton(\n    id: string,\n    classes: string[]\n  ): HTMLButtonElement {\n    const button: HTMLButtonElement = createElement('button', [...classes], {\n      id,\n    });\n    return button;\n  }\n\n  private createshipShufflerButtonContainer(): HTMLDivElement {\n    const container: HTMLDivElement = createElement('div', [\n      'ship-shuffler-button-container',\n    ]);\n    return container;\n  }\n\n  private randomizeGameboard() {\n    this.gameboardController.removeAllPieces(this.fleet);\n    randomizeBSGameboard(this.gameboardController, this.fleet);\n  }\n\n  private updateGameboard(gameboardContainer: HTMLElement) {\n    GlobalEventBus.emit('updateGameboard', gameboardContainer);\n  }\n\n  // ðŸ’­ --------------------------------------------------------------\n  // ðŸ’­ Utilities\n\n  public getId() {\n    return this.id;\n  }\n}","import { BattleshipBoardController } from \"../../logic/bs-gameboard-controller/bs-gameboard-controller\";\nimport { createElement } from \"../../utilities/random-utilities\";\nimport { Fleet } from \"../../types/logic-types\";\nimport { randomizeBSGameboard } from \"../../setup/randomize-bs-gameboard\";\nimport GlobalEventBus from \"../../utilities/event-bus\";\n\nexport class ReadyUpButton {\n  private readonly readyUpButton: HTMLButtonElement;\n  private readonly readyUpButtonContainer: HTMLDivElement;\n  private readonly readyUpButtonTextContent: string = 'Ready Up';\n  private readonly buttonClass: string = 'ready-up-button';\n\n  constructor(\n    private id: string,\n    private gameboardContainer: HTMLElement,\n    private gameboardController: BattleshipBoardController,\n    private fleet: Fleet // do i need this for this button?\n  ) {\n    // ! check for constructor errors\n\n    this.readyUpButton = this.createReadyUpButton(this.buttonClass);\n\n    this.readyUpButton.classList.add(this.buttonClass);\n    this.addEventListener(this.readyUpButton);\n\n    this.readyUpButtonContainer = this.createReadyUpButtonContainer();\n    this.readyUpButtonContainer.appendChild(this.readyUpButton);\n  }\n\n  private addEventListener(readyUpButton: HTMLButtonElement) {\n    readyUpButton.addEventListener('click', () => {\n      this.readyUp(); \n      // this.updateGameboard(this.gameboardContainer); // ? this.lockGameBoard?\n    });\n  }\n\n  private createReadyUpButton(\n    id: string,\n  ): HTMLButtonElement {\n    const readyUpTextSpan = createElement('span', ['ready-up-button-text']);\n    readyUpTextSpan.textContent = this.readyUpButtonTextContent;\n\n    const inactiveReadyUpButton = createElement(\n      'img',\n      ['inactive-ready-up-button'],\n      {\n        alt: 'Ready Up (Inactive)',\n        src: 'https://cyclone-studios.s3.us-east-2.amazonaws.com/s3_cyclone-studios/assets/images/big-red-button/btn-inactive.svg',\n      }\n    );\n\n    const activeReadyUpButton = createElement(\n      'img',\n      ['active-ready-up-button'],\n      {\n        alt: 'Ready Up (Active)',\n        src: 'https://cyclone-studios.s3.us-east-2.amazonaws.com/s3_cyclone-studios/assets/images/big-red-button/btn-active.svg',\n      }\n    );\n\n    const button: HTMLButtonElement = createElement('button', [], {\n      id,\n    });\n    button.append(\n      activeReadyUpButton,\n      inactiveReadyUpButton,\n      readyUpTextSpan\n    );\n\n    return button;\n  }\n\n  private createReadyUpButtonContainer(): HTMLDivElement {\n    const container: HTMLDivElement = createElement('div', [\n      'ready-up-button-container',\n    ]);\n    return container;\n  }\n\n  private readyUp() {\n    console.log('Ready up button clicked');\n\n    // handle component\n    // remove drag and click listeners from player gameboard\n    // ? do i need this?\n    // this.gameboardController.lockShips();\n  }\n\n  public render(targetElement: HTMLElement) {\n    if (!targetElement) {\n      throw new Error(`Target element not found. Recieved ${targetElement}.`);\n    }\n\n    targetElement.appendChild(this.readyUpButtonContainer);\n  }\n\n  // ðŸ’­ --------------------------------------------------------------\n  // ðŸ’­ Helpers\n\n  // ðŸ’­ --------------------------------------------------------------\n  // ðŸ’­ Utilities\n\n  public getId() {\n    return this.id;\n  }\n}","import { PlayerGameboardComponent } from \"../../../components/player-gameboard-component/player-gameboard-component\";\nimport { BattleshipBoardController } from \"../../../logic/bs-gameboard-controller/bs-gameboard-controller\";\nimport { Fleet } from \"../../../types/logic-types\";\nimport { createElement } from \"../../../utilities/random-utilities\";\nimport { ShipShufflerButtonComponent } from \"../../../components/ship-shuffler-component/ship-shuffler-component\";\nimport { ReadyUpButton } from \"../../../components/ready-up-component/ready-up-component\";\n\nexport function createMainThreeParabellumFragment(\n  playerGameboardComponent: PlayerGameboardComponent,\n  gameboardController: BattleshipBoardController,\n  fleet: Fleet\n): DocumentFragment {\n  const shipShufflerButton = new ShipShufflerButtonComponent(\n    playerGameboardComponent.id,\n    playerGameboardComponent.boardContainer,\n    gameboardController,\n    fleet\n  );\n  \n  const lockShipsButton = new ReadyUpButton(\n    playerGameboardComponent.id,\n    playerGameboardComponent.boardContainer,\n    gameboardController,\n    fleet\n  );\n  \n  const mainContainerThreeParabellumWrapper: HTMLDivElement = createElement(\n    'div',\n    ['parabellum'],\n    {\n      id: 'main-container-three-parabellum',\n    }\n  );\n  shipShufflerButton.render(mainContainerThreeParabellumWrapper);\n  lockShipsButton.render(mainContainerThreeParabellumWrapper);\n\n  const parabellumFragment = new DocumentFragment();\n  parabellumFragment.appendChild(mainContainerThreeParabellumWrapper);\n\n  return parabellumFragment;\n};\n\n","import { createElement } from \"../../../utilities/random-utilities\";\n\nexport function createMainThreeBellumFragment(): DocumentFragment {\n\n  // ! Fleet hit-points visual feedback\n\n  const mainContainerThreeBellumWrapper = createElement('div', ['bellum'], {\n    id: 'main-container-three-bellum',\n  });\n\n  const bellumFragment = new DocumentFragment();\n  bellumFragment.appendChild(mainContainerThreeBellumWrapper);\n\n  return bellumFragment;\n}\n\n","import { createElement } from \"../../../utilities/random-utilities\";\n\nexport function createMainThreePostBellumFragment(): DocumentFragment {\n\n  // ! Play again button and find new opponent button (disabled) \n\n  const mainContainerThreePostBellumWrapper = createElement('div', ['post-bellum'], {\n    id: 'main-container-three-post-bellum',\n  });\n\n  const bellumFragment = new DocumentFragment();\n  bellumFragment.appendChild(mainContainerThreePostBellumWrapper);\n\n  return bellumFragment;\n}\n","import { createElement, generateListFragment } from \"../../utilities/random-utilities\";\nimport instructionsListItemTextContentArray from '../../../json/instructions-list-item-text-content.json';\n\n\nexport class InstructionsDialogComponent {\n  private readonly instructionsDialog: HTMLDialogElement;\n  private readonly instructionsDialogCloseButton: HTMLButtonElement;\n  static readonly dialogId = 'instructions-dialog';\n  static readonly closeButtonId = 'instructions-dialog-close-button';\n\n  constructor() {\n    this.instructionsDialogCloseButton =\n      this.createInstructionsDialogCloseButton();\n    this.instructionsDialog = this.createInstructionsDialog(\n      this.instructionsDialogCloseButton\n    );\n  }\n\n  get element(): HTMLDialogElement {\n    return this.instructionsDialog;\n  }\n\n  private createInstructionsDialogCloseButton() {\n    const instructionsDialogCloseButton = createElement(\n      'button',\n      ['close-button'],\n      {\n        id: InstructionsDialogComponent.closeButtonId,\n        'aria-label': 'Close Instructions Dialog',\n      }\n    );\n    instructionsDialogCloseButton.textContent = 'X';\n\n    this.addEventListener(instructionsDialogCloseButton);\n\n    return instructionsDialogCloseButton;\n  }\n\n  private createInstructionsDialog(closeButton: HTMLButtonElement) {\n    const tertiaryHeading = createElement('h3', ['tertiary-heading'], {\n      id: 'instructions-dialog-heading',\n    });\n    tertiaryHeading.textContent = 'Deploy your Bips:';\n\n    const listItemContentArray: { textContent: string }[] =\n      instructionsListItemTextContentArray;\n\n    const listItemFragment = generateListFragment(\n      listItemContentArray,\n      'instructions'\n    );\n\n    const instructionsList = createElement('ul', ['instructions-list'], {\n      id: 'instructions-list',\n    });\n    instructionsList.appendChild(listItemFragment);\n\n    const unanchoredShipExample = createElement('div', [], {\n      id: 'unanchored-ship-example',\n    });\n\n    const unanchoredShipText = createElement('p', [], {\n      id: 'unanchored-ship-text',\n    });\n    unanchoredShipText.textContent = '= Bips adrift';\n\n    const visualFeedbackKeyContainer = createElement('div', [], {\n      id: 'visual-feedback-key-container',\n    });\n    visualFeedbackKeyContainer.append(\n      unanchoredShipExample,\n      unanchoredShipText\n    );\n\n    const instructionsContentContainer = createElement('div', [], {\n      id: 'instructions-content',\n    });\n    instructionsContentContainer.append(\n      tertiaryHeading,\n      instructionsList,\n      visualFeedbackKeyContainer,\n    );\n\n    const instructionsDialog = createElement('dialog', [], {\n      id: InstructionsDialogComponent.dialogId,\n    });\n    instructionsDialog.append(\n      closeButton,\n      instructionsContentContainer\n    );\n\n    return instructionsDialog;\n  }\n\n  private addEventListener(instructionsDialogCloseButton: HTMLButtonElement) {\n    instructionsDialogCloseButton.addEventListener('click', () => {\n      this.instructionsDialog.close();\n    });\n  }\n\n  public render(targetElement: HTMLElement) {\n    if (!targetElement) {\n      throw new Error(`Target element not found. Recieved ${targetElement}.`);\n    }\n\n    targetElement.appendChild(this.instructionsDialog);\n  }\n}\n","import './styles/sass/index.scss'\n\nimport { players } from './typescript/state/player-state';\nimport { randomizeBSGameboard } from './typescript/setup/randomize-bs-gameboard';\nimport { createHeader } from './typescript/markup/header/header';\nimport { createMain } from './typescript/markup/main/main';\nimport { InstructionsDialogComponent } from './typescript/markup/lightboxes/instructions-dialog';\n\nfunction init() {\n  const randomizeBSGameboards = () => {\n    randomizeBSGameboard(\n      players.player.gameboardController,\n      players.player.fleetBuilder.fleet\n    );\n    randomizeBSGameboard(\n      players.opponent.gameboardController,\n      players.opponent.fleetBuilder.fleet\n    );\n  };\n\n  // benchmark board set randomization\n  console.time('randomizeBSGameboards');\n  randomizeBSGameboards();\n  console.timeEnd('randomizeBSGameboards');\n\n  // > --------------------------------------------------------------\n  // > DOM\n\n  const content = document.getElementById('content');\n  if (!content) throw new Error('Fuck!');\n\n  const header = createHeader();\n  const mainElement = createMain(players);\n  content.append(header, mainElement);\n\n  // ðŸ’­ --------------------------------------------------------------\n\n  const instructionsDialog = new InstructionsDialogComponent();\n  instructionsDialog.render(content);\n  instructionsDialog.element.showModal();\n\n  // ðŸ’­ --------------------------------------------------------------\n}\n\n// time all the above stuff\nconsole.time('init');\ninit();\nconsole.timeEnd('init');","import { createElement } from \"../../utilities/random-utilities\";\nimport { createNav } from \"./nav/nav\";\n\nexport function createHeader() {\n  const nav = createNav();\n\n  const header = createElement('header');\n  header.appendChild(nav);\n\n  return header;\n}","import { createElement } from \"../../../utilities/random-utilities\";\nimport { createGitHubLink } from \"../../../utilities/create-github-link\";\n\nexport function createNav() {\n  const headingLink = createElement('a', ['heading-link'], {\n    id: 'heading-link',\n    href: 'https://johnkeyscloud.github.io/battleship/',\n  });\n  headingLink.textContent = 'ShattleBip';\n\n  const heading: HTMLHeadingElement = createElement('h1', ['main-heading']);\n  heading.appendChild(headingLink);\n\n  const gitHubLogoLink: HTMLAnchorElement = createGitHubLink();\n\n  const nav: HTMLElement = createElement('nav');\n  nav.append(heading, gitHubLogoLink);\n\n  return nav;\n}; ","\nimport { PlayerState } from \"../../types/state-types\";\nimport { createElement } from \"../../utilities/random-utilities\";\n\nimport { MainContainerTwo } from \"./main-container-two/main-container-two\";\n\nimport { PlayerGameboardComponent } from \"../../components/player-gameboard-component/player-gameboard-component\";\nimport { OpponentGameboardComponent } from \"../../components/opponent-gameboard-component/opponent-gameboard-component\";\n\n// ðŸ’­ --------------------------------------------------------------\n\nimport { HotSwapContainer } from \"../../utilities/create-hot-swap-container\";\nimport { createMainOneParabellumFragment } from \"./main-container-one-fragments/main-one-parabellum\";\nimport { createMainOneBellumFragment } from \"./main-container-one-fragments/main-one-bellum\";\nimport { createMainOnePostBellumFragment } from \"./main-container-one-fragments/main-one-post-bellum\";\n\nimport { createMainThreeParabellumFragment } from \"./main-container-three-fragments/main-three-parabellum\";\nimport { createMainThreeBellumFragment } from \"./main-container-three-fragments/main-three-bellum\";\nimport { createMainThreePostBellumFragment } from \"./main-container-three-fragments/main-three-post-bellum\";\n\nimport { FragmentKey } from \"../../types/markup-types\";\n\nexport function createMain(\n  players: { player: PlayerState; opponent: PlayerState }\n) {  \n  const playerGameboardComponent = new PlayerGameboardComponent(\n    players.player\n  );\n  const playerGameboardController = players.player.gameboardController;\n  const playerFleet = players.player.fleetBuilder.fleet;\n\n  const opponentGameboardComponent = new OpponentGameboardComponent(\n    players.opponent\n  );\n\n  // ðŸ’­ --------------------------------------------------------------\n\n  const mainOneFragments: { [key in FragmentKey]: DocumentFragment } = {\n    parabellum: createMainOneParabellumFragment(),\n    bellum: createMainOneBellumFragment(),\n    postBellum: createMainOnePostBellumFragment(),\n  };\n  const mainContainerOne = new HotSwapContainer(\n    'section',\n    mainOneFragments,\n    'parabellum',\n    ['main-container'],\n    {\n      id: 'main-container-one',\n    }\n  );\n\n  // ðŸ’­ --------------------------------------------------------------\n\n  const mainContainerTwo = new MainContainerTwo(\n    playerGameboardComponent,\n    opponentGameboardComponent\n  );\n\n  // ðŸ’­ --------------------------------------------------------------\n\n  const mainThreeFragments: { [key in FragmentKey]: DocumentFragment } = {\n    parabellum: createMainThreeParabellumFragment(\n      playerGameboardComponent,\n      playerGameboardController,\n      playerFleet\n    ),\n    bellum: createMainThreeBellumFragment(),\n    postBellum: createMainThreePostBellumFragment(),\n  }; \n  const mainContainerThree = new HotSwapContainer(\n    'section',\n    mainThreeFragments,\n    'parabellum',\n    ['main-container'],\n    {\n      id: 'main-container-three',\n    }\n  );\n\n  // ðŸ’­ --------------------------------------------------------------\n\n  const mainElement = createElement('main');\n  mainContainerOne.render(mainElement);\n  mainContainerTwo.render(mainElement);\n  mainContainerThree.render(mainElement);\n\n  return mainElement;\n}\n"],"names":["AnglesOfRotation","ShipType","SHIP_SYMBOLS","Carrier","Symbol","Battleship","Cruiser","Submarine","Destroyer","PatrolBoat","sizeLookup","undefined","BattleshipBuilder","seaworthy","rotationalPivotConfigurations","transientAngleOfRotation","coordinatesArray","orientation","currentplacementConfigurations","isPlaced","this","_hitCounter","constructor","type","version","symbol","key","length","Error","hit","isSeaworthy","hitCounter","resetConfigurations","shouldResetShipRotationalData","placementConfigurations","areArraysEqual","arrayOne","arrayTwo","every","value","index","getConvertedTypeFromAttr","element","attribute","typeGuard","attrValue","getAttribute","getRandomInt","min","max","Math","floor","random","createElement","tag","classes","attributes","document","forEach","cls","classList","add","Object","entries","setAttribute","createPositionObject","x","y","shipLength","bow","stern","isCoordinateInBounds","coordinate","boardSize","areCoordinatesInBounds","coordinates","arePositionsEqual","positionOne","positionTwo","isCoordinates","Array","isArray","isOrientation","includes","isOutOfBounds","isPlacePieceParams","isPosition","proto","getPrototypeOf","prototype","isPlainObject","isShipType","values","BattleshipFleetBuilder","fleet","createFleet","fleetConfigs","shipType","config","createHasbroFleet","carrier","battleship","destroyer","submarine","patrolBoat","createMBFleet","cruiser","getShip","ship","BattleshipBoardBuilder","static","_boardSize","_fillValue","vacant","_board","from","fill","board","fillValue","BattleshipBoardController","playerState","getValidPositions","battleshipBoardBuilder","extractAxisArray","axisIndex","gameboard","map","row","findValidPositionsInAxis","axisArray","isHorizontal","streak","validAxisPositions","i","bowPosition","sternPosition","push","validPositionsPerAxis","validPositions","getValidShipPositions","gameboardBuilder","battleshipBoardController","getAllValidBowCoordinates","allValidBowCoordinates","Set","positionsInAxis","position","movePiece","newBowCoordinates","console","warn","currentOrientation","newPosition","isPositionInBounds","axisArrayKey","createAxisArrayKey","isNewPositionValid","some","placementParameters","relocateShip","placePiece","battleshipBoardRepository","bowX","bowY","errorMessage","isPositionValid","shipConfigurations","validPosition","JSON","stringify","getPlacementCoordinates","placementCoordinates","sternX","sternY","primary","axisEnd","placeOnBoard","shipPlacementCoordinates","shipSymbol","setShipConfigurations","Degrees0","updateOccupiedCoordinatesSet","addShipToFleetCoordinates","placeShip","gameboardRepository","setFleetRotatedPlacePieceParams","fleetBuilder","prettyPrint","table","description","receiveAttack","attackedShip","getShipAt","log","removePiece","isShipValidForRemoval","shipCoordinates","removeShipFromBoard","nullifyShipCoordinatesValue","nullifyShipCoordinateSetValue","resetShipConfigurations","nullifyShipValidRotationalParams","removeAllPieces","keys","error","rotatePiece","getNextPiecePlacementParams","rotationalPositionMap","currentAngle","maxAngle","pop","getMaxAngle","originalBowCoordinates","originalOrientation","nextAngle","getNextAngle","find","angle","nextPlacePieceParams","get","inBoundRotationalPlacePieceForFleet","initialAngle","finalPlacePieceParams","isRotatedPositionValid","updateTransientPlacementParams","areCoordinatesVacant","shipSymbolValue","getShipTypeFromSymbol","angleOfRotation","gameboardSize","newAxisIndexStart","axisIndexEnd","Degrees90","Degrees270","getRotatedPlacePieceParams","applyOffsetToCoordinate","determineRotatedOrientation","Degrees180","getRotatedBowCoordinates","rotationalPivotBowCoordinates","rotatedBowCoordinates","rotationalPivotOrientation","rotatedPiecePlacementParams","createRotatedPiecePlacementParams","rotatedPlacePieceParamsMap","rotatedPlacePieceParams","Map","angleOfRotationString","angleOfRotationToNum","rotatedPlacePieceParamsValue","bowCoordinates","placePieceParams","set","generateRotationalPositionMap","isShipPlaced","setShipRotatedPlacePieceParams","setShipValidRotationalParams","BattleshipBoardRepository","_fleetCoordinates","_inBoundRotationalPlacePieceParamsForFleet","fleetCoordinates","setMemberTemplate","validRotatedPlacePieceParams","createPlayerStateObject","fleetVersion","gameboardController","players","player","opponent","randomizeBSGameboard","getValidCoordinatesRecursively","attempts","generateRandomCoordinates","areCoordinatesValid","validPositionsParams","randomOrientation","setAttributes","MainContainerTwo","playerGameboardComponent","opponentGameboardComponent","mainContainerTwo","id","getPlayerGameboardComponent","render","targetElement","appendChild","events","on","eventName","fn","off","filter","listener","emit","data","PlayerGameboardComponent","fleetElements","boardContainer","generateBoardContainer","generateBoardFragment","dragImage","createDragImage","shipDragClone","createShipDragClone","GlobalEventBus","updateGameboard","append","handleFleetPlacement","src","createBackgroundCellsFragment","cellFragment","DocumentFragment","rowIndex","colIndex","symbolDescription","toLowerCase","gridCell","toString","role","gridCellContainer","createShipElement","gridPlacementValue","gridCrossAxis","shipUnitFragment","generateShipUnitFragment","shipContainerElement","draggable","style","gridColumn","gridRow","gridTemplateColumns","gridTemplateRows","gameboardContainer","setProperty","handleDragListeners","handleClickListeners","gameboardBackground","boardFragment","isBow","isStern","shipUnit","getGridPlacementValue","updateFleetElements","placeFleetOnGameboard","querySelector","shipElement","size","clear","removeChild","remove","dragState","currentShipInstance","initialPlacementConfigurations","isValidDropTarget","currentDragOverCell","cloneSnapOffset","shipBorderValueSplit","addEventListener","e","handleShipDragStart","handleShipDrag","handleShipDragEnter","handleShipDragLeave","handleShipDragOver","handleShipDrop","handleShipDragEnd","target","HTMLDivElement","matches","getCloneSnapOffset","shipBow","getShipBow","match","getComputedStyle","documentElement","getPropertyValue","trim","groups","offsetX","offsetY","getBoundingClientRect","width","height","Number","numberValue","updateDragState","dataTransfer","setDragImage","setCloneDimensions","shipContainer","shipClone","shipBoundingRect","setTimeout","pointerEvents","setInitialDragStyles","classifyValidCellCoordinates","shipLengthAttr","classifyValidBowCells","gridCells","gridCellCoordinates","validBowCoordinates","querySelectorAll","snapCloneToCursor","areValidBowCoordinates","contains","preventDefault","initialOrientation","validGridCell","xAttr","yAttr","newCoordinates","resetShipPosition","initialBowCoordinates","removeDragStyles","cellFeedbackClass","gameboardClientRect","gameboardOffsetX","left","gameboardOffsetY","top","cursorX","clientX","cursorY","clientY","handleShipRotation","getId","OpponentGameboardComponent","_","HotSwapContainer","elementTag","fragments","initialFragmentKey","classNames","hotSwapContainer","replaceFragment","fragment","replaceChildren","replaceFragmentByKey","getFragment","createMainOneParabellumFragment","parabellumHeading","textContent","informationImage","informationButton","informationButtonContainer","mainContainerOneParabellumWrapper","parabellumFragment","createMainOneBellumFragment","mainContainerOneBellumWrapper","bellumFragment","createMainOnePostBellumFragment","mainContainerPostBellumWrapper","postBellumFragment","ShipShufflerButtonComponent","shipShufflerButtonTextContent","buttonClass","shipShufflerButton","createshipShufflerButton","shipShufflerButtonContainer","createshipShufflerButtonContainer","randomizeGameboard","ReadyUpButton","readyUpButtonTextContent","readyUpButton","createReadyUpButton","readyUpButtonContainer","createReadyUpButtonContainer","readyUp","readyUpTextSpan","inactiveReadyUpButton","alt","activeReadyUpButton","button","createMainThreeParabellumFragment","lockShipsButton","mainContainerThreeParabellumWrapper","createMainThreeBellumFragment","mainContainerThreeBellumWrapper","createMainThreePostBellumFragment","mainContainerThreePostBellumWrapper","InstructionsDialogComponent","instructionsDialogCloseButton","createInstructionsDialogCloseButton","instructionsDialog","createInstructionsDialog","closeButtonId","closeButton","tertiaryHeading","listItemFragment","generateListFragment","listItemTextContentArray","identifier","listFragment","listItem","listElement","instructionsListItemTextContentArray","instructionsList","unanchoredShipExample","unanchoredShipText","visualFeedbackKeyContainer","instructionsContentContainer","dialogId","close","time","timeEnd","content","getElementById","header","nav","headingLink","href","heading","gitHubLogoLink","color","gitHubUsername","projectName","pathOne","createElementNS","pathTwo","gInner","gOuter","stroke","gitHubSVG","viewBox","xmlns","rel","createGitHubLink","createNav","createHeader","mainElement","playerGameboardController","playerFleet","mainOneFragments","parabellum","bellum","postBellum","mainContainerOne","mainThreeFragments","mainContainerThree","createMain","showModal","init"],"sourceRoot":""}